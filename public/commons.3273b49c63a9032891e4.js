"use strict";(self.webpackChunkmemoize=self.webpackChunkmemoize||[]).push([[351],{2947:(e,t,r)=>{if(r.d(t,{b:()=>FunctionsClient}),523==r.j)var n=r(4025);if(523==r.j)var i=r(1416);var __awaiter=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function fulfilled(e){try{step(n.next(e))}catch(t){s(t)}}function rejected(e){try{step(n.throw(e))}catch(t){s(t)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};class FunctionsClient{constructor(e,{headers:t={},customFetch:r}={}){this.url=e,this.headers=t,this.fetch=(0,n.e)(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return __awaiter(this,void 0,void 0,(function*(){try{const{headers:n,method:s,body:o}=t;let a,l={};o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&("undefined"!=typeof Blob&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",a=o):"string"==typeof o?(l["Content-Type"]="text/plain",a=o):"undefined"!=typeof FormData&&o instanceof FormData?a=o:(l["Content-Type"]="application/json",a=JSON.stringify(o)));const c=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:a}).catch((e=>{throw new i.QQ(e)})),u=c.headers.get("x-relay-error");if(u&&"true"===u)throw new i.iF(c);if(!c.ok)throw new i.MF(c);let h,d=(null!==(r=c.headers.get("Content-Type"))&&void 0!==r?r:"text/plain").split(";")[0].trim();return h="application/json"===d?yield c.json():"application/octet-stream"===d?yield c.blob():"multipart/form-data"===d?yield c.formData():yield c.text(),{data:h,error:null}}catch(n){return{data:null,error:n}}}))}}},4025:(e,t,r)=>{r.d(t,{e:()=>resolveFetch});var __awaiter=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function fulfilled(e){try{step(n.next(e))}catch(t){s(t)}}function rejected(e){try{step(n.throw(e))}catch(t){s(t)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};const resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>__awaiter(void 0,void 0,void 0,(function*(){return yield(yield Promise.resolve().then(r.t.bind(r,1607,23))).fetch(...e)})):fetch),(...e)=>t(...e)}},1416:(e,t,r)=>{r.d(t,{MF:()=>FunctionsHttpError,QQ:()=>FunctionsFetchError,iF:()=>FunctionsRelayError});class FunctionsError extends(523==r.j?Error:null){constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class FunctionsFetchError extends(523==r.j?FunctionsError:null){constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class FunctionsRelayError extends(523==r.j?FunctionsError:null){constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class FunctionsHttpError extends(523==r.j?FunctionsError:null){constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}},8873:(e,t,r)=>{r.d(t,{ak:()=>GoTrueClient});var __awaiter=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function fulfilled(e){try{step(n.next(e))}catch(t){s(t)}}function rejected(e){try{step(n.throw(e))}catch(t){s(t)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};const isBrowser=()=>"undefined"!=typeof document,n={tested:!1,writable:!1},supportsLocalStorage=()=>{if(!isBrowser())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(t){return!1}if(n.tested)return n.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),n.tested=!0,n.writable=!0}catch(t){n.tested=!0,n.writable=!1}return n.writable};function parseParametersFromURL(e){const t={},r=new URL(e);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach(((e,r)=>{t[r]=e}))}catch(n){}return r.searchParams.forEach(((e,r)=>{t[r]=e})),t}const resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>__awaiter(void 0,void 0,void 0,(function*(){return yield(yield Promise.resolve().then(r.t.bind(r,1607,23))).fetch(...e)})):fetch),(...e)=>t(...e)},looksLikeFetchResponse=e=>"object"==typeof e&&null!==e&&"status"in e&&"ok"in e&&"json"in e&&"function"==typeof e.json,setItemAsync=(e,t,r)=>__awaiter(void 0,void 0,void 0,(function*(){yield e.setItem(t,JSON.stringify(r))})),getItemAsync=(e,t)=>__awaiter(void 0,void 0,void 0,(function*(){const r=yield e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(n){return r}})),removeItemAsync=(e,t)=>__awaiter(void 0,void 0,void 0,(function*(){yield e.removeItem(t)}));class Deferred{constructor(){this.promise=new Deferred.promiseConstructor(((e,t)=>{this.resolve=e,this.reject=t}))}}function decodeJWTPayload(e){const t=e.split(".");if(3!==t.length)throw new Error("JWT is not valid: not a JWT structure");if(!/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(function decodeBase64URL(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let r,n,i,s,o,a,l,c="",u=0;for(e=e.replace("-","+").replace("_","/");u<e.length;)s=t.indexOf(e.charAt(u++)),o=t.indexOf(e.charAt(u++)),a=t.indexOf(e.charAt(u++)),l=t.indexOf(e.charAt(u++)),r=s<<2|o>>4,n=(15&o)<<4|a>>2,i=(3&a)<<6|l,c+=String.fromCharCode(r),64!=a&&0!=n&&(c+=String.fromCharCode(n)),64!=l&&0!=i&&(c+=String.fromCharCode(i));return c}(r))}function sleep(e){return __awaiter(this,void 0,void 0,(function*(){return yield new Promise((t=>{setTimeout((()=>t(null)),e)}))}))}function dec2hex(e){return("0"+e.toString(16)).substr(-2)}function generatePKCEVerifier(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let r="";for(let n=0;n<56;n++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,dec2hex).join("")}function generatePKCEChallenge(e){return __awaiter(this,void 0,void 0,(function*(){if("undefined"==typeof crypto)return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;return function base64urlencode(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}(yield function sha256(e){return __awaiter(this,void 0,void 0,(function*(){const t=(new TextEncoder).encode(e),r=yield crypto.subtle.digest("SHA-256",t),n=new Uint8Array(r);return Array.from(n).map((e=>String.fromCharCode(e))).join("")}))}(e))}))}Deferred.promiseConstructor=Promise;const i=/__stack_guard__([a-zA-Z0-9_-]+)__/;let s,o=!1,a=!1;function isInStackGuard(e){var t,r;let n;s();try{throw new Error}catch(a){n=a}const o=null!==(r=null===(t=n.stack)||void 0===t?void 0:t.split("\n"))&&void 0!==r?r:[];for(let s=0;s<o.length;s+=1){const t=o[s].match(i);if(t&&t[1]===e)return!0}return!1}function stackGuard(e,t){return __awaiter(this,void 0,void 0,(function*(){yield s();const r=`__stack_guard__${e}__`,n={[r]:()=>__awaiter(this,void 0,void 0,(function*(){return yield t()}))};return Object.assign(n[r],{displayName:r}),yield n[r]()}))}function stackGuardsSupported(){return __awaiter(this,void 0,void 0,(function*(){return o||(yield s()),a}))}let l=!1;s=()=>__awaiter(void 0,void 0,void 0,(function*(){o||(o=!0,yield stackGuard("ENV_CHECK",(()=>__awaiter(void 0,void 0,void 0,(function*(){yield sleep(0);const e=isInStackGuard("ENV_CHECK");return a=e,e||l||(l=!0,console.warn("@supabase/gotrue-js: Stack guards not supported in this environment. Generally not an issue but may point to a very conservative transpilation environment (use ES2017 or above) that implements async/await with generators, or this is a JavaScript engine that does not support async/await stack traces. Safari is known to not support stack guards.")),e})))))}));var c=r(4389),fetch_awaiter=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function fulfilled(e){try{step(n.next(e))}catch(t){s(t)}}function rejected(e){try{step(n.throw(e))}catch(t){s(t)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))},__rest=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};const _getErrorMessage=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),u=[502,503,504];function handleError(e){return fetch_awaiter(this,void 0,void 0,(function*(){if(!looksLikeFetchResponse(e))throw new c.y4(_getErrorMessage(e),0);if(u.includes(e.status))throw new c.y4(_getErrorMessage(e),e.status);let t;try{t=yield e.json()}catch(r){throw new c.Iu(_getErrorMessage(r),r)}throw new c.Ws(_getErrorMessage(t),e.status||500)}))}const _getRequestParams=(e,t,r,n)=>{const i={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};function _request(e,t,r,n){return fetch_awaiter(this,void 0,void 0,(function*(){var i;const s=Object.assign({},null==n?void 0:n.headers);(null==n?void 0:n.jwt)&&(s.Authorization=`Bearer ${n.jwt}`);const o=null!==(i=null==n?void 0:n.query)&&void 0!==i?i:{};(null==n?void 0:n.redirectTo)&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=yield function _handleRequest(e,t,r,n,i,s){return fetch_awaiter(this,void 0,void 0,(function*(){const o=_getRequestParams(t,n,i,s);let a;try{a=yield e(r,o)}catch(l){throw console.error(l),new c.y4(_getErrorMessage(l),0)}if(a.ok||(yield handleError(a)),null==n?void 0:n.noResolveJson)return a;try{return yield a.json()}catch(l){yield handleError(l)}}))}(e,t,r+a,{headers:s,noResolveJson:null==n?void 0:n.noResolveJson},{},null==n?void 0:n.body);return(null==n?void 0:n.xform)?null==n?void 0:n.xform(l):{data:Object.assign({},l),error:null}}))}function _sessionResponse(e){var t;let r=null;(function hasSession(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(r=Object.assign({},e),r.expires_at=function expiresAt(e){return Math.round(Date.now()/1e3)+e}(e.expires_in));return{data:{session:r,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function _userResponse(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function _ssoResponse(e){return{data:e,error:null}}function _generateLinkResponse(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s}=e,o=__rest(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s},user:Object.assign({},o)},error:null}}function _noResolveJsonResponse(e){return e}var GoTrueAdminApi_awaiter=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function fulfilled(e){try{step(n.next(e))}catch(t){s(t)}}function rejected(e){try{step(n.throw(e))}catch(t){s(t)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))},GoTrueAdminApi_rest=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};class GoTrueAdminApi{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=resolveFetch(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(e,t="global"){return GoTrueAdminApi_awaiter(this,void 0,void 0,(function*(){try{return yield _request(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if((0,c.f1)(r))return{data:null,error:r};throw r}}))}inviteUserByEmail(e,t={}){return GoTrueAdminApi_awaiter(this,void 0,void 0,(function*(){try{return yield _request(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:_userResponse})}catch(r){if((0,c.f1)(r))return{data:{user:null},error:r};throw r}}))}generateLink(e){return GoTrueAdminApi_awaiter(this,void 0,void 0,(function*(){try{const{options:t}=e,r=GoTrueAdminApi_rest(e,["options"]),n=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(n.new_email=null==r?void 0:r.newEmail,delete n.newEmail),yield _request(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:_generateLinkResponse,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if((0,c.f1)(t))return{data:{properties:null,user:null},error:t};throw t}}))}createUser(e){return GoTrueAdminApi_awaiter(this,void 0,void 0,(function*(){try{return yield _request(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:_userResponse})}catch(t){if((0,c.f1)(t))return{data:{user:null},error:t};throw t}}))}listUsers(e){return GoTrueAdminApi_awaiter(this,void 0,void 0,(function*(){var t,r,n,i,s,o,a;try{const l={nextPage:null,lastPage:0,total:0},c=yield _request(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(i=null===(n=null==e?void 0:e.perPage)||void 0===n?void 0:n.toString())&&void 0!==i?i:""},xform:_noResolveJsonResponse});if(c.error)throw c.error;const u=yield c.json(),h=null!==(s=c.headers.get("x-total-count"))&&void 0!==s?s:0,d=null!==(a=null===(o=c.headers.get("link"))||void 0===o?void 0:o.split(","))&&void 0!==a?a:[];return d.length>0&&(d.forEach((e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t})),l.total=parseInt(h)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if((0,c.f1)(l))return{data:{users:[]},error:l};throw l}}))}getUserById(e){return GoTrueAdminApi_awaiter(this,void 0,void 0,(function*(){try{return yield _request(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:_userResponse})}catch(t){if((0,c.f1)(t))return{data:{user:null},error:t};throw t}}))}updateUserById(e,t){return GoTrueAdminApi_awaiter(this,void 0,void 0,(function*(){try{return yield _request(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:_userResponse})}catch(r){if((0,c.f1)(r))return{data:{user:null},error:r};throw r}}))}deleteUser(e,t=!1){return GoTrueAdminApi_awaiter(this,void 0,void 0,(function*(){try{return yield _request(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:_userResponse})}catch(r){if((0,c.f1)(r))return{data:{user:null},error:r};throw r}}))}_listFactors(e){return GoTrueAdminApi_awaiter(this,void 0,void 0,(function*(){try{const{data:t,error:r}=yield _request(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(t){if((0,c.f1)(t))return{data:null,error:t};throw t}}))}_deleteFactor(e){return GoTrueAdminApi_awaiter(this,void 0,void 0,(function*(){try{return{data:yield _request(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if((0,c.f1)(t))return{data:null,error:t};throw t}}))}}const h="2.46.1",d={"X-Client-Info":`gotrue-js/${h}`},f={getItem:e=>supportsLocalStorage()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{supportsLocalStorage()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{supportsLocalStorage()&&globalThis.localStorage.removeItem(e)}};var GoTrueClient_awaiter=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function fulfilled(e){try{step(n.next(e))}catch(t){s(t)}}function rejected(e){try{step(n.throw(e))}catch(t){s(t)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};!function polyfillGlobalThis(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();const p={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:d,flowType:"implicit",debug:!1},v=3e4;function lockNoOp(e,t,r){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){return yield r()}))}class GoTrueClient{constructor(e){var t;this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.broadcastChannel=null,this.instanceID=GoTrueClient.nextInstanceID,GoTrueClient.nextInstanceID+=1,this.instanceID>0&&isBrowser()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},p),e);if(this.logDebugMessages=r.debug,this.inMemorySession=null,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.persistSession=r.persistSession,this.storage=r.storage||f,this.admin=new GoTrueAdminApi({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=resolveFetch(r.fetch),this.lock=r.lock||lockNoOp,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession&&this.storage===f&&!supportsLocalStorage()&&console.warn("No storage option exists to persist the session, which may result in unexpected behavior when using auth.\n        If you want to set persistSession to true, please provide a storage option or you may set persistSession to false to disable this warning."),isBrowser()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(n){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",n)}null===(t=this.broadcastChannel)||void 0===t||t.addEventListener("message",(e=>GoTrueClient_awaiter(this,void 0,void 0,(function*(){this._debug("received broadcast notification from other tab or client",e),yield this._notifyAllSubscribers(e.data.event,e.data.session,!1)}))))}this.initialize()}_debug(...e){return this.logDebugMessages&&console.log(`GoTrueClient@${this.instanceID} (${h}) ${(new Date).toISOString()}`,...e),this}initialize(){return this.initializePromise?this.initializePromise:this._initialize()}_initialize(){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){if(this.initializePromise)throw new Error("Double call of #_initialize()");return this.initializePromise=this._acquireLock(-1,(()=>GoTrueClient_awaiter(this,void 0,void 0,(function*(){return yield stackGuard("_initialize",(()=>GoTrueClient_awaiter(this,void 0,void 0,(function*(){try{const e=!!isBrowser()&&(yield this._isPKCEFlow());if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:r}=yield this._getSessionFromURL(e);if(r)return this._debug("#_initialize()","error detecting session from URL",r),yield this._removeSession(),{error:r};const{session:n,redirectType:i}=t;return this._debug("#_initialize()","detected session in URL",n,"redirect type",i),yield this._saveSession(n),setTimeout((()=>GoTrueClient_awaiter(this,void 0,void 0,(function*(){"recovery"===i?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",n):yield this._notifyAllSubscribers("SIGNED_IN",n)}))),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(e){return(0,c.f1)(e)?{error:e}:{error:new c.Iu("Unexpected error during initialization",e)}}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}}))))})))),yield this.initializePromise}))}signUp(e){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){var t,r,n;try{let i;if(yield this._removeSession(),"email"in e){const{email:r,password:n,options:s}=e;let o=null,a=null;if("pkce"===this.flowType){const e=generatePKCEVerifier();yield setItemAsync(this.storage,`${this.storageKey}-code-verifier`,e),o=yield generatePKCEChallenge(e),a=e===o?"plain":"s256"}i=yield _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==s?void 0:s.emailRedirectTo,body:{email:r,password:n,data:null!==(t=null==s?void 0:s.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},code_challenge:o,code_challenge_method:a},xform:_sessionResponse})}else{if(!("phone"in e))throw new c.e_("You must provide either an email or phone number and a password");{const{phone:t,password:s,options:o}=e;i=yield _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:s,data:null!==(r=null==o?void 0:o.data)&&void 0!==r?r:{},channel:null!==(n=null==o?void 0:o.channel)&&void 0!==n?n:"sms",gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken}},xform:_sessionResponse})}}const{data:s,error:o}=i;if(o||!s)return{data:{user:null,session:null},error:o};const a=s.session,l=s.user;return s.session&&(yield this._saveSession(s.session),yield this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(i){if((0,c.f1)(i))return{data:{user:null,session:null},error:i};throw i}}))}signInWithPassword(e){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){try{let t;if(yield this._removeSession(),"email"in e){const{email:r,password:n,options:i}=e;t=yield _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:_sessionResponse})}else{if(!("phone"in e))throw new c.e_("You must provide either an email or phone number and a password");{const{phone:r,password:n,options:i}=e;t=yield _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:_sessionResponse})}}const{data:r,error:n}=t;return n?{data:{user:null,session:null},error:n}:r&&r.session&&r.user?(r.session&&(yield this._saveSession(r.session),yield this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:{user:r.user,session:r.session},error:n}):{data:{user:null,session:null},error:new c.eV}}catch(t){if((0,c.f1)(t))return{data:{user:null,session:null},error:t};throw t}}))}signInWithOAuth(e){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){var t,r,n,i;return yield this._removeSession(),yield this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(n=e.options)||void 0===n?void 0:n.queryParams,skipBrowserRedirect:null===(i=e.options)||void 0===i?void 0:i.skipBrowserRedirect})}))}exchangeCodeForSession(e){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){const t=yield getItemAsync(this.storage,`${this.storageKey}-code-verifier`),{data:r,error:n}=yield _request(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:t},xform:_sessionResponse});return yield removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),n?{data:{user:null,session:null},error:n}:r&&r.session&&r.user?(r.session&&(yield this._saveSession(r.session),yield this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:r,error:n}):{data:{user:null,session:null},error:new c.eV}}))}signInWithIdToken(e){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){yield this._removeSession();try{const{options:t,provider:r,token:n,access_token:i,nonce:s}=e,o=yield _request(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:i,nonce:s,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:_sessionResponse}),{data:a,error:l}=o;return l?{data:{user:null,session:null},error:l}:a&&a.session&&a.user?(a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:l}):{data:{user:null,session:null},error:new c.eV}}catch(t){if((0,c.f1)(t))return{data:{user:null,session:null},error:t};throw t}}))}signInWithOtp(e){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){var t,r,n,i,s;try{if(yield this._removeSession(),"email"in e){const{email:n,options:i}=e;let s=null,o=null;if("pkce"===this.flowType){const e=generatePKCEVerifier();yield setItemAsync(this.storage,`${this.storageKey}-code-verifier`,e),s=yield generatePKCEChallenge(e),o=e===s?"plain":"s256"}const{error:a}=yield _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:n,data:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:{},create_user:null===(r=null==i?void 0:i.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},code_challenge:s,code_challenge_method:o},redirectTo:null==i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){const{phone:t,options:r}=e,{data:o,error:a}=yield _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(n=null==r?void 0:r.data)&&void 0!==n?n:{},create_user:null===(i=null==r?void 0:r.shouldCreateUser)||void 0===i||i,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},channel:null!==(s=null==r?void 0:r.channel)&&void 0!==s?s:"sms"}});return{data:{user:null,session:null,messageId:null==o?void 0:o.message_id},error:a}}throw new c.e_("You must provide either an email or phone number.")}catch(o){if((0,c.f1)(o))return{data:{user:null,session:null},error:o};throw o}}))}verifyOtp(e){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){var t,r;try{let n,i;"email_change"!==e.type&&"phone_change"!==e.type&&(yield this._removeSession()),"options"in e&&(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo,i=null===(r=e.options)||void 0===r?void 0:r.captchaToken);const{data:s,error:o}=yield _request(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:_sessionResponse});if(o)throw o;if(!s)throw new Error("An error occurred on token verification.");const a=s.session,l=s.user;return(null==a?void 0:a.access_token)&&(yield this._saveSession(a),yield this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(n){if((0,c.f1)(n))return{data:{user:null,session:null},error:n};throw n}}))}signInWithSSO(e){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){var t,r,n;try{return yield this._removeSession(),yield _request(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==r?r:void 0}),(null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:_ssoResponse})}catch(i){if((0,c.f1)(i))return{data:null,error:i};throw i}}))}reauthenticate(){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){try{return yield this._useSession((e=>GoTrueClient_awaiter(this,void 0,void 0,(function*(){const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new c.GF;const{error:n}=yield _request(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}}))))}catch(e){if((0,c.f1)(e))return{data:{user:null,session:null},error:e};throw e}}))}resend(e){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){try{"email_change"!=e.type&&"phone_change"!=e.type&&(yield this._removeSession());const t=`${this.url}/resend`;if("email"in e){const{email:r,type:n,options:i}=e,{error:s}=yield _request(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},redirectTo:null==i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:s}}if("phone"in e){const{phone:r,type:n,options:i}=e,{data:s,error:o}=yield _request(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:null==s?void 0:s.message_id},error:o}}throw new c.e_("You must provide either an email or phone number and a type")}catch(t){if((0,c.f1)(t))return{data:{user:null,session:null},error:t};throw t}}))}getSession(){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){return this._useSession((e=>GoTrueClient_awaiter(this,void 0,void 0,(function*(){return e}))))}))}_acquireLock(e,t){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){this._debug("#_acquireLock","begin",e);try{return(yield stackGuardsSupported())?isInStackGuard("_acquireLock")?(this._debug("#_acquireLock","recursive call"),yield t()):yield this.lock(`lock:${this.storageKey}`,e,(()=>GoTrueClient_awaiter(this,void 0,void 0,(function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{return yield stackGuard("_acquireLock",(()=>GoTrueClient_awaiter(this,void 0,void 0,(function*(){return yield t()}))))}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey)}})))):(this._debug("#_acquireLock","Stack guards not supported, so exclusive locking is not performed as it can lead to deadlocks if the lock is attempted to be recursively acquired (as the recursion cannot be detected)."),yield t())}finally{this._debug("#_acquireLock","end")}}))}_useSession(e){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){this._debug("#_useSession","begin");try{if(isInStackGuard("_useSession")){this._debug("#_useSession","recursive call");const t=yield this.__loadSession();return yield e(t)}return yield this._acquireLock(-1,(()=>GoTrueClient_awaiter(this,void 0,void 0,(function*(){return yield stackGuard("_useSession",(()=>GoTrueClient_awaiter(this,void 0,void 0,(function*(){const t=yield this.__loadSession();return yield e(t)}))))}))))}finally{this._debug("#_useSession","end")}}))}__loadSession(){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){if(this._debug("#__loadSession()","begin"),this.logDebugMessages&&!isInStackGuard("_useSession")&&(yield stackGuardsSupported()))throw new Error("Please use #_useSession()");isInStackGuard("_initialize")&&this._debug("#__loadSession","#_initialize recursion detected",(new Error).stack),yield this.initializePromise;try{let e=null;if(this.persistSession){const t=yield getItemAsync(this.storage,this.storageKey);this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession()))}else e=this.inMemorySession,this._debug("#getSession()","session from memory",e);if(!e)return{data:{session:null},error:null};const t=!!e.expires_at&&e.expires_at<=Date.now()/1e3;if(this._debug("#__loadSession()",`session has${t?"":" not"} expired`,"expires_at",e.expires_at),!t)return{data:{session:e},error:null};const{session:r,error:n}=yield this._callRefreshToken(e.refresh_token);return n?{data:{session:null},error:n}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}))}getUser(e){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){try{return e?yield _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:_userResponse}):yield this._useSession((e=>GoTrueClient_awaiter(this,void 0,void 0,(function*(){var t,r;const{data:n,error:i}=e;if(i)throw i;return yield _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(r=null===(t=n.session)||void 0===t?void 0:t.access_token)&&void 0!==r?r:void 0,xform:_userResponse})}))))}catch(t){if((0,c.f1)(t))return{data:{user:null},error:t};throw t}}))}updateUser(e,t={}){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){try{return yield this._useSession((r=>GoTrueClient_awaiter(this,void 0,void 0,(function*(){const{data:n,error:i}=r;if(i)throw i;if(!n.session)throw new c.GF;const s=n.session,{data:o,error:a}=yield _request(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:e,jwt:s.access_token,xform:_userResponse});if(a)throw a;return s.user=o.user,yield this._saveSession(s),yield this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}}))))}catch(r){if((0,c.f1)(r))return{data:{user:null},error:r};throw r}}))}_decodeJWT(e){return decodeJWTPayload(e)}setSession(e){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){try{if(!e.access_token||!e.refresh_token)throw new c.GF;const t=Date.now()/1e3;let r=t,n=!0,i=null;const s=decodeJWTPayload(e.access_token);if(s.exp&&(r=s.exp,n=r<=t),n){const{session:t,error:r}=yield this._callRefreshToken(e.refresh_token);if(r)return{data:{user:null,session:null},error:r};if(!t)return{data:{user:null,session:null},error:null};i=t}else{const{data:n,error:s}=yield this.getUser(e.access_token);if(s)throw s;i={access_token:e.access_token,refresh_token:e.refresh_token,user:n.user,token_type:"bearer",expires_in:r-t,expires_at:r},yield this._saveSession(i),yield this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if((0,c.f1)(t))return{data:{session:null,user:null},error:t};throw t}}))}refreshSession(e){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){try{return yield this._useSession((t=>GoTrueClient_awaiter(this,void 0,void 0,(function*(){var r;if(!e){const{data:n,error:i}=t;if(i)throw i;e=null!==(r=n.session)&&void 0!==r?r:void 0}if(!(null==e?void 0:e.refresh_token))throw new c.GF;const{session:n,error:i}=yield this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}}))))}catch(t){if((0,c.f1)(t))return{data:{user:null,session:null},error:t};throw t}}))}_getSessionFromURL(e){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){try{if(!isBrowser())throw new c.LI("No browser detected.");if("implicit"===this.flowType&&!this._isImplicitGrantFlow())throw new c.LI("Not a valid implicit grant flow url.");if("pkce"==this.flowType&&!e)throw new c.Po("Not a valid PKCE flow url.");const t=parseParametersFromURL(window.location.href);if(e){if(!t.code)throw new c.Po("No code detected.");const{data:e,error:r}=yield this.exchangeCodeForSession(t.code);if(r)throw r;const n=new URL(window.location.href);return n.searchParams.delete("code"),window.history.replaceState(window.history.state,"",n.toString()),{data:{session:e.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new c.LI(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:n,access_token:i,refresh_token:s,expires_in:o,token_type:a}=t;if(!(i&&o&&s&&a))throw new c.LI("No session defined in URL");const l=Math.round(Date.now()/1e3),u=parseInt(o),h=l+u,{data:d,error:f}=yield this.getUser(i);if(f)throw f;const p={provider_token:r,provider_refresh_token:n,access_token:i,expires_in:u,expires_at:h,refresh_token:s,token_type:a,user:d.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:t.type},error:null}}catch(t){if((0,c.f1)(t))return{data:{session:null,redirectType:null},error:t};throw t}}))}_isImplicitGrantFlow(){const e=parseParametersFromURL(window.location.href);return!(!isBrowser()||!e.access_token&&!e.error_description)}_isPKCEFlow(){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){const e=parseParametersFromURL(window.location.href),t=yield getItemAsync(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}))}signOut({scope:e}={scope:"global"}){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){return yield this._useSession((t=>GoTrueClient_awaiter(this,void 0,void 0,(function*(){var r;const{data:n,error:i}=t;if(i)return{error:i};const s=null===(r=n.session)||void 0===r?void 0:r.access_token;if(s){const{error:t}=yield this.admin.signOut(s,e);if(t&&(!(0,c.Tw)(t)||404!==t.status&&401!==t.status))return{error:t}}return"others"!==e&&(yield this._removeSession(),yield removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),yield this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}}))))}))}onAuthStateChange(e){const t=function uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),this._emitInitialSession(t),{data:{subscription:r}}}_emitInitialSession(e){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){return yield this._useSession((t=>GoTrueClient_awaiter(this,void 0,void 0,(function*(){var r,n;try{const{data:{session:n},error:i}=t;if(i)throw i;yield null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",n),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(i){yield null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}}))))}))}resetPasswordForEmail(e,t={}){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){let r=null,n=null;if("pkce"===this.flowType){const e=generatePKCEVerifier();yield setItemAsync(this.storage,`${this.storageKey}-code-verifier`,e),r=yield generatePKCEChallenge(e),n=e===r?"plain":"s256"}try{return yield _request(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if((0,c.f1)(i))return{data:null,error:i};throw i}}))}_refreshAccessToken(e){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return yield function retryable(e,t){return new Promise(((r,n)=>{(()=>{__awaiter(this,void 0,void 0,(function*(){for(let s=0;s<1/0;s++)try{const n=yield e(s);if(!t(s,null,n))return void r(n)}catch(i){if(!t(s,i))return void n(i)}}))})()}))}((r=>GoTrueClient_awaiter(this,void 0,void 0,(function*(){return yield sleep(200*r),this._debug(t,"refreshing attempt",r),yield _request(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:_sessionResponse})}))),((e,t,n)=>n&&n.error&&(0,c.AO)(n.error)&&Date.now()+200*(e+1)-r<v))}catch(r){if(this._debug(t,"error",r),(0,c.f1)(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}))}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,t){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){const r=yield this._getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),isBrowser()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}))}_recoverAndRefresh(){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=yield getItemAsync(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r))return this._debug(t,"session is not valid"),void(null!==r&&(yield this._removeSession()));const n=Math.round(Date.now()/1e3),i=(null!==(e=r.expires_at)&&void 0!==e?e:1/0)<n+10;if(this._debug(t,`session has${i?"":" not"} expired with margin of 10s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:e}=yield this._callRefreshToken(r.refresh_token);e&&(console.error(e),(0,c.AO)(e)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",e),yield this._removeSession()))}}else yield this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){return this._debug(t,"error",r),void console.error(r)}finally{this._debug(t,"end")}}))}_callRefreshToken(e){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){var t,r;if(!e)throw new c.GF;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Deferred;const{data:t,error:r}=yield this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new c.GF;yield this._saveSession(t.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const n={session:t.session,error:null};return this.refreshingDeferred.resolve(n),n}catch(i){if(this._debug(n,"error",i),(0,c.f1)(i)){const e={session:null,error:i};return null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(r=this.refreshingDeferred)||void 0===r||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}))}_notifyAllSubscribers(e,t,r=!0){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const n=[],i=Array.from(this.stateChangeEmitters.values()).map((r=>GoTrueClient_awaiter(this,void 0,void 0,(function*(){try{yield r.callback(e,t)}catch(i){n.push(i)}}))));if(yield Promise.all(i),n.length>0){for(let e=0;e<n.length;e+=1)console.error(n[e]);throw n[0]}}finally{this._debug(n,"end")}}))}_saveSession(e){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){this._debug("#_saveSession()",e),this.persistSession||(this.inMemorySession=e),this.persistSession&&e.expires_at&&(yield this._persistSession(e))}))}_persistSession(e){return this._debug("#_persistSession()",e),setItemAsync(this.storage,this.storageKey,e)}_removeSession(){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){this._debug("#_removeSession()"),this.persistSession?yield removeItemAsync(this.storage,this.storageKey):this.inMemorySession=null}))}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&isBrowser()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}_startAutoRefresh(){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval((()=>this._autoRefreshTokenTick()),v);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout((()=>GoTrueClient_awaiter(this,void 0,void 0,(function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}))),0)}))}_stopAutoRefresh(){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}))}startAutoRefresh(){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()}))}stopAutoRefresh(){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()}))}_autoRefreshTokenTick(){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){this._debug("#_autoRefreshTokenTick()","begin");try{const t=Date.now();try{return yield this._useSession((e=>GoTrueClient_awaiter(this,void 0,void 0,(function*(){const{data:{session:r}}=e;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const n=Math.floor((1e3*r.expires_at-t)/v);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),n<=3&&(yield this._callRefreshToken(r.refresh_token))}))))}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}_handleVisibilityChange(){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){if(this._debug("#_handleVisibilityChange()"),!isBrowser()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>GoTrueClient_awaiter(this,void 0,void 0,(function*(){return yield this._onVisibilityChanged(!1)})),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}))}_onVisibilityChanged(e){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){this._debug(`#_onVisibilityChanged(${e})`,"visibilityState",document.visibilityState),"visible"===document.visibilityState?setTimeout((()=>GoTrueClient_awaiter(this,void 0,void 0,(function*(){e||(yield this.initializePromise,yield this._recoverAndRefresh(),this._debug("#_onVisibilityChanged()","finished waiting for initialize, _recoverAndRefresh")),this.autoRefreshToken&&this._startAutoRefresh()}))),0):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}))}_getUrlForProvider(e,t){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){const r=[`provider=${encodeURIComponent(e)}`];if((null==t?void 0:t.redirectTo)&&r.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),(null==t?void 0:t.scopes)&&r.push(`scopes=${encodeURIComponent(t.scopes)}`),"pkce"===this.flowType){const e=generatePKCEVerifier();yield setItemAsync(this.storage,`${this.storageKey}-code-verifier`,e);const t=yield generatePKCEChallenge(e),n=e===t?"plain":"s256";this._debug("PKCE","code verifier",`${e.substring(0,5)}...`,"code challenge",t,"method",n);const i=new URLSearchParams({code_challenge:`${encodeURIComponent(t)}`,code_challenge_method:`${encodeURIComponent(n)}`});r.push(i.toString())}if(null==t?void 0:t.queryParams){const e=new URLSearchParams(t.queryParams);r.push(e.toString())}return`${this.url}/authorize?${r.join("&")}`}))}_unenroll(e){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){try{return yield this._useSession((t=>GoTrueClient_awaiter(this,void 0,void 0,(function*(){var r;const{data:n,error:i}=t;return i?{data:null,error:i}:yield _request(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(r=null==n?void 0:n.session)||void 0===r?void 0:r.access_token})}))))}catch(t){if((0,c.f1)(t))return{data:null,error:t};throw t}}))}_enroll(e){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){try{return yield this._useSession((t=>GoTrueClient_awaiter(this,void 0,void 0,(function*(){var r,n;const{data:i,error:s}=t;if(s)return{data:null,error:s};const{data:o,error:a}=yield _request(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:null===(r=null==i?void 0:i.session)||void 0===r?void 0:r.access_token});return a?{data:null,error:a}:((null===(n=null==o?void 0:o.totp)||void 0===n?void 0:n.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})}))))}catch(t){if((0,c.f1)(t))return{data:null,error:t};throw t}}))}_verify(e){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){try{return yield this._useSession((t=>GoTrueClient_awaiter(this,void 0,void 0,(function*(){var r;const{data:n,error:i}=t;if(i)return{data:null,error:i};const{data:s,error:o}=yield _request(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(r=null==n?void 0:n.session)||void 0===r?void 0:r.access_token});return o?{data:null,error:o}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:o})}))))}catch(t){if((0,c.f1)(t))return{data:null,error:t};throw t}}))}_challenge(e){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){try{return yield this._useSession((t=>GoTrueClient_awaiter(this,void 0,void 0,(function*(){var r;const{data:n,error:i}=t;return i?{data:null,error:i}:yield _request(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:null===(r=null==n?void 0:n.session)||void 0===r?void 0:r.access_token})}))))}catch(t){if((0,c.f1)(t))return{data:null,error:t};throw t}}))}_challengeAndVerify(e){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){const{data:t,error:r}=yield this._challenge({factorId:e.factorId});return r?{data:null,error:r}:yield this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}))}_listFactors(){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){const{data:{user:e},error:t}=yield this.getUser();if(t)return{data:null,error:t};const r=(null==e?void 0:e.factors)||[],n=r.filter((e=>"totp"===e.factor_type&&"verified"===e.status));return{data:{all:r,totp:n},error:null}}))}_getAuthenticatorAssuranceLevel(){return GoTrueClient_awaiter(this,void 0,void 0,(function*(){return yield this._useSession((e=>GoTrueClient_awaiter(this,void 0,void 0,(function*(){var t,r;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const s=this._decodeJWT(n.access_token);let o=null;s.aal&&(o=s.aal);let a=o;(null!==(r=null===(t=n.user.factors)||void 0===t?void 0:t.filter((e=>"verified"===e.status)))&&void 0!==r?r:[]).length>0&&(a="aal2");return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:s.amr||[]},error:null}}))))}))}}GoTrueClient.nextInstanceID=0;!globalThis||!globalThis.localStorage||globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")},4389:(e,t,r)=>{r.d(t,{AO:()=>isAuthRetryableFetchError,GF:()=>AuthSessionMissingError,Iu:()=>AuthUnknownError,LI:()=>AuthImplicitGrantRedirectError,Po:()=>AuthPKCEGrantCodeExchangeError,Tw:()=>isAuthApiError,Ws:()=>AuthApiError,eV:()=>AuthInvalidTokenResponseError,e_:()=>AuthInvalidCredentialsError,f1:()=>isAuthError,y4:()=>AuthRetryableFetchError});class AuthError extends(523==r.j?Error:null){constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function isAuthError(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class AuthApiError extends(523==r.j?AuthError:null){constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function isAuthApiError(e){return isAuthError(e)&&"AuthApiError"===e.name}class AuthUnknownError extends(523==r.j?AuthError:null){constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class CustomAuthError extends(523==r.j?AuthError:null){constructor(e,t,r){super(e),this.name=t,this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class AuthSessionMissingError extends(523==r.j?CustomAuthError:null){constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class AuthInvalidTokenResponseError extends(523==r.j?CustomAuthError:null){constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class AuthInvalidCredentialsError extends(523==r.j?CustomAuthError:null){constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class AuthImplicitGrantRedirectError extends(523==r.j?CustomAuthError:null){constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class AuthPKCEGrantCodeExchangeError extends(523==r.j?CustomAuthError:null){constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class AuthRetryableFetchError extends(523==r.j?CustomAuthError:null){constructor(e,t){super(e,"AuthRetryableFetchError",t)}}function isAuthRetryableFetchError(e){return isAuthError(e)&&"AuthRetryableFetchError"===e.name}},6832:(e,t,r)=>{r.d(t,{VH:()=>RealtimeClient});var n=r(47);const i={"X-Client-Info":"realtime-js/2.7.3"};var s,o,a,l,c;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(s||(s={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(o||(o={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(a||(a={})),function(e){e.websocket="websocket"}(l||(l={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(c||(c={}));var u,h,d=r(4407),f=r(9938);class Push{constructor(e,t,r={},n=1e4){this.channel=e,this.event=t,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null,this.rateLimited=!1}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){if(this._hasReceived("timeout"))return;this.startTimeout(),this.sent=!0;"rate limited"===this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()})&&(this.rateLimited=!0)}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},(e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)})),this.timeoutTimer=setTimeout((()=>{this.trigger("timeout",{})}),this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter((t=>t.status===e)).forEach((e=>e.callback(t)))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(u||(u={}));class RealtimePresence{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},(e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.joinRef=this.channel._joinRef(),this.state=RealtimePresence.syncState(this.state,e,t,r),this.pendingDiffs.forEach((e=>{this.state=RealtimePresence.syncDiff(this.state,e,t,r)})),this.pendingDiffs=[],n()})),this.channel._on(r.diff,{},(e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=RealtimePresence.syncDiff(this.state,e,t,r),n())})),this.onJoin(((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})})),this.onLeave(((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})})),this.onSync((()=>{this.channel._trigger("presence",{event:"sync"})}))}static syncState(e,t,r,n){const i=this.cloneDeep(e),s=this.transformState(t),o={},a={};return this.map(i,((e,t)=>{s[e]||(a[e]=t)})),this.map(s,((e,t)=>{const r=i[e];if(r){const n=t.map((e=>e.presence_ref)),i=r.map((e=>e.presence_ref)),s=t.filter((e=>i.indexOf(e.presence_ref)<0)),l=r.filter((e=>n.indexOf(e.presence_ref)<0));s.length>0&&(o[e]=s),l.length>0&&(a[e]=l)}else o[e]=t})),this.syncDiff(i,{joins:o,leaves:a},r,n)}static syncDiff(e,t,r,n){const{joins:i,leaves:s}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(i,((t,n)=>{var i;const s=null!==(i=e[t])&&void 0!==i?i:[];if(e[t]=this.cloneDeep(n),s.length>0){const r=e[t].map((e=>e.presence_ref)),n=s.filter((e=>r.indexOf(e.presence_ref)<0));e[t].unshift(...n)}r(t,s,n)})),this.map(s,((t,r)=>{let i=e[t];if(!i)return;const s=r.map((e=>e.presence_ref));i=i.filter((e=>s.indexOf(e.presence_ref)<0)),e[t]=i,n(t,i,r),0===i.length&&delete e[t]})),e}static map(e,t){return Object.getOwnPropertyNames(e).map((r=>t(r,e[r])))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce(((t,r)=>{const n=e[r];return t[r]="metas"in n?n.metas.map((e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e))):n,t}),{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(h||(h={}));const convertChangeData=(e,t,r={})=>{var n;const i=null!==(n=r.skipTypes)&&void 0!==n?n:[];return Object.keys(t).reduce(((r,n)=>(r[n]=convertColumn(n,e,t,i),r)),{})},convertColumn=(e,t,r,n)=>{const i=t.find((t=>t.name===e)),s=null==i?void 0:i.type,o=r[e];return s&&!n.includes(s)?convertCell(s,o):noop(o)},convertCell=(e,t)=>{if("_"===e.charAt(0)){const r=e.slice(1,e.length);return toArray(t,r)}switch(e){case h.bool:return toBoolean(t);case h.float4:case h.float8:case h.int2:case h.int4:case h.int8:case h.numeric:case h.oid:return toNumber(t);case h.json:case h.jsonb:return toJson(t);case h.timestamp:return toTimestampString(t);case h.abstime:case h.date:case h.daterange:case h.int4range:case h.int8range:case h.money:case h.reltime:case h.text:case h.time:case h.timestamptz:case h.timetz:case h.tsrange:case h.tstzrange:default:return noop(t)}},noop=e=>e,toBoolean=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},toNumber=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},toJson=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},toArray=(e,t)=>{if("string"!=typeof e)return e;const r=e.length-1,n=e[r];if("{"===e[0]&&"}"===n){let n;const s=e.slice(1,r);try{n=JSON.parse("["+s+"]")}catch(i){n=s?s.split(","):[]}return n.map((e=>convertCell(t,e)))}return e},toTimestampString=e=>"string"==typeof e?e.replace(" ","T"):e;var p,v,m,__awaiter=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function fulfilled(e){try{step(n.next(e))}catch(t){s(t)}}function rejected(e){try{step(n.throw(e))}catch(t){s(t)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(p||(p={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes"}(v||(v={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(m||(m={}));class RealtimeChannel{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=o.closed,this.joinedOnce=!1,this.pushBuffer=[],this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new Push(this,a.join,this.params,this.timeout),this.rejoinTimer=new d.Z((()=>this._rejoinUntilConnected()),this.socket.reconnectAfterMs),this.joinPush.receive("ok",(()=>{this.state=o.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach((e=>e.send())),this.pushBuffer=[]})),this._onClose((()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=o.closed,this.socket._remove(this)})),this._onError((e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=o.errored,this.rejoinTimer.scheduleTimeout())})),this.joinPush.receive("timeout",(()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=o.errored,this.rejoinTimer.scheduleTimeout())})),this._on(a.reply,{},((e,t)=>{this._trigger(this._replyEventName(t),e)})),this.presence=new RealtimePresence(this)}subscribe(e,t=this.timeout){var r,n;if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:s}}=this.params;this._onError((t=>e&&e("CHANNEL_ERROR",t))),this._onClose((()=>e&&e("CLOSED")));const o={},a={broadcast:i,presence:s,postgres_changes:null!==(n=null===(r=this.bindings.postgres_changes)||void 0===r?void 0:r.map((e=>e.filter)))&&void 0!==n?n:[]};this.socket.accessToken&&(o.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:a},o)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",(({postgres_changes:t})=>{var r;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),void 0!==t){const n=this.bindings.postgres_changes,i=null!==(r=null==n?void 0:n.length)&&void 0!==r?r:0,s=[];for(let r=0;r<i;r++){const i=n[r],{filter:{event:o,schema:a,table:l,filter:c}}=i,u=t&&t[r];if(!u||u.event!==o||u.schema!==a||u.table!==l||u.filter!==c)return this.unsubscribe(),void(e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes")));s.push(Object.assign(Object.assign({},i),{id:u.id}))}return this.bindings.postgres_changes=s,void(e&&e("SUBSCRIBED"))}e&&e("SUBSCRIBED")})).receive("error",(t=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(t).join(", ")||"error")))})).receive("timeout",(()=>{e&&e("TIMED_OUT")}))}return this}presenceState(){return this.presence.state}track(e,t={}){return __awaiter(this,void 0,void 0,(function*(){return yield this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}))}untrack(e={}){return __awaiter(this,void 0,void 0,(function*(){return yield this.send({type:"presence",event:"untrack"},e)}))}on(e,t,r){return this._on(e,t,r)}send(e,t={}){return new Promise((r=>{var n,i,s;const o=this._push(e.type,e,t.timeout||this.timeout);o.rateLimited&&r("rate limited"),"broadcast"!==e.type||(null===(s=null===(i=null===(n=this.params)||void 0===n?void 0:n.config)||void 0===i?void 0:i.broadcast)||void 0===s?void 0:s.ack)||r("ok"),o.receive("ok",(()=>r("ok"))),o.receive("timeout",(()=>r("timed out")))}))}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=o.leaving;const onClose=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(a.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise((t=>{const r=new Push(this,a.leave,{},e);r.receive("ok",(()=>{onClose(),t("ok")})).receive("timeout",(()=>{onClose(),t("timed out")})).receive("error",(()=>{t("error")})),r.send(),this._canPush()||r.trigger("ok",{})}))}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Push(this,e,t,r);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var n,i;const s=e.toLocaleLowerCase(),{close:o,error:l,leave:c,join:u}=a;if(r&&[o,l,c,u].indexOf(s)>=0&&r!==this._joinRef())return;let h=this._onMessage(s,t,r);if(t&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?null===(n=this.bindings.postgres_changes)||void 0===n||n.filter((e=>{var t,r,n;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(n=null===(r=e.filter)||void 0===r?void 0:r.event)||void 0===n?void 0:n.toLocaleLowerCase())===s})).map((e=>e.callback(h,r))):null===(i=this.bindings[s])||void 0===i||i.filter((e=>{var r,n,i,o,a,l;if(["broadcast","presence","postgres_changes"].includes(s)){if("id"in e){const s=e.id,o=null===(r=e.filter)||void 0===r?void 0:r.event;return s&&(null===(n=t.ids)||void 0===n?void 0:n.includes(s))&&("*"===o||(null==o?void 0:o.toLocaleLowerCase())===(null===(i=t.data)||void 0===i?void 0:i.type.toLocaleLowerCase()))}{const r=null===(a=null===(o=null==e?void 0:e.filter)||void 0===o?void 0:o.event)||void 0===a?void 0:a.toLocaleLowerCase();return"*"===r||r===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===s})).map((e=>{if("object"==typeof h&&"ids"in h){const e=h.data,{schema:t,table:r,commit_timestamp:n,type:i,errors:s}=e,o={schema:t,table:r,commit_timestamp:n,eventType:i,new:{},old:{},errors:s};h=Object.assign(Object.assign({},o),this._getPayloadRecords(e))}e.callback(h,r)}))}_isClosed(){return this.state===o.closed}_isJoined(){return this.state===o.joined}_isJoining(){return this.state===o.joining}_isLeaving(){return this.state===o.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const n=e.toLocaleLowerCase(),i={type:n,filter:t,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter((e=>{var n;return!((null===(n=e.type)||void 0===n?void 0:n.toLocaleLowerCase())===r&&RealtimeChannel.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(a.close,{},e)}_onError(e){this._on(a.error,{},(t=>e(t)))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=o.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=convertChangeData(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=convertChangeData(e.columns,e.old_record)),t}}var RealtimeClient_awaiter=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function fulfilled(e){try{step(n.next(e))}catch(t){s(t)}}function rejected(e){try{step(n.throw(e))}catch(t){s(t)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};const RealtimeClient_noop=()=>{};class RealtimeClient{constructor(e,t){var r;this.accessToken=null,this.channels=[],this.endPoint="",this.headers=i,this.params={},this.timeout=1e4,this.transport=n.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=RealtimeClient_noop,this.conn=null,this.sendBuffer=[],this.serializer=new f.Z,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.eventsPerSecondLimitMs=100,this.inThrottle=!1,this.endPoint=`${e}/${l.websocket}`,(null==t?void 0:t.params)&&(this.params=t.params),(null==t?void 0:t.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),(null==t?void 0:t.timeout)&&(this.timeout=t.timeout),(null==t?void 0:t.logger)&&(this.logger=t.logger),(null==t?void 0:t.transport)&&(this.transport=t.transport),(null==t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const s=null===(r=null==t?void 0:t.params)||void 0===r?void 0:r.eventsPerSecond;s&&(this.eventsPerSecondLimitMs=Math.floor(1e3/s)),this.reconnectAfterMs=(null==t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null==t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null==t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new d.Z((()=>RealtimeClient_awaiter(this,void 0,void 0,(function*(){this.disconnect(),this.connect()}))),this.reconnectAfterMs)}connect(){this.conn||(this.conn=new this.transport(this._endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(e){return RealtimeClient_awaiter(this,void 0,void 0,(function*(){const t=yield e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}))}removeAllChannels(){return RealtimeClient_awaiter(this,void 0,void 0,(function*(){const e=yield Promise.all(this.channels.map((e=>e.unsubscribe())));return this.disconnect(),e}))}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case s.connecting:return c.Connecting;case s.open:return c.Open;case s.closing:return c.Closing;default:return c.Closed}}isConnected(){return this.connectionState()===c.Open}channel(e,t={config:{}}){this.isConnected()||this.connect();const r=new RealtimeChannel(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:n,ref:i}=e;let callback=()=>{this.encode(e,(e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)}))};if(this.log("push",`${t} ${r} (${i})`,n),this.isConnected())if(["broadcast","presence","postgres_changes"].includes(r)){if(this._throttle(callback)())return"rate limited"}else callback();else this.sendBuffer.push(callback)}setAuth(e){this.accessToken=e,this.channels.forEach((t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(a.access_token,{access_token:e})}))}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find((t=>t.topic===e&&(t._isJoined()||t._isJoining())));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter((t=>t._joinRef()!==e._joinRef()))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}_onConnMessage(e){this.decode(e.data,(e=>{let{topic:t,event:r,payload:n,ref:i}=e;(i&&i===this.pendingHeartbeatRef||r===(null==n?void 0:n.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${n.status||""} ${t} ${r} ${i&&"("+i+")"||""}`,n),this.channels.filter((e=>e._isMember(t))).forEach((e=>e._trigger(r,n,i))),this.stateChangeCallbacks.message.forEach((t=>t(e)))}))}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval((()=>this._sendHeartbeat()),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach((e=>e()))}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach((t=>t(e)))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach((t=>t(e)))}_triggerChanError(){this.channels.forEach((e=>e._trigger(a.error)))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const r=e.match(/\?/)?"&":"?";return`${e}${r}${new URLSearchParams(t)}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach((e=>e())),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_throttle(e,t=this.eventsPerSecondLimitMs){return()=>!!this.inThrottle||(e(),t>0&&(this.inThrottle=!0,setTimeout((()=>{this.inThrottle=!1}),t)),!1)}}},9938:(e,t,r)=>{r.d(t,{Z:()=>Serializer});class Serializer{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const n=t.getUint8(1),i=t.getUint8(2);let s=this.HEADER_LENGTH+2;const o=r.decode(e.slice(s,s+n));s+=n;const a=r.decode(e.slice(s,s+i));s+=i;return{ref:null,topic:o,event:a,payload:JSON.parse(r.decode(e.slice(s,e.byteLength)))}}}},4407:(e,t,r)=>{r.d(t,{Z:()=>Timer});class Timer{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout((()=>{this.tries=this.tries+1,this.callback()}),this.timerCalc(this.tries+1))}}},9677:(e,t,r)=>{if(r.d(t,{K:()=>StorageClient}),523==r.j)var n=r(4248);if(523==r.j)var i=r(951);class StorageClient extends(523==r.j?i.Z:null){constructor(e,t={},r){super(e,t,r)}from(e){return new n.Z(this.url,this.headers,e,this.fetch)}}},3786:(e,t,r)=>{r.d(t,{Q:()=>n});const n={"X-Client-Info":"storage-js/2.5.1"}},2090:(e,t,r)=>{r.d(t,{AE:()=>StorageError,Kf:()=>StorageApiError,a_:()=>isStorageError,k6:()=>StorageUnknownError});class StorageError extends(523==r.j?Error:null){constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function isStorageError(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class StorageApiError extends(523==r.j?StorageError:null){constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class StorageUnknownError extends(523==r.j?StorageError:null){constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}},5569:(e,t,r)=>{if(r.d(t,{Od:()=>remove,U2:()=>get,gz:()=>put,v_:()=>post}),523==r.j)var n=r(2090);if(523==r.j)var i=r(3739);var __awaiter=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function fulfilled(e){try{step(n.next(e))}catch(t){s(t)}}function rejected(e){try{step(n.throw(e))}catch(t){s(t)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};const _getErrorMessage=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),handleError=(e,t)=>__awaiter(void 0,void 0,void 0,(function*(){const r=yield(0,i.A)();e instanceof r?e.json().then((r=>{t(new n.Kf(_getErrorMessage(r),e.status||500))})).catch((e=>{t(new n.k6(_getErrorMessage(e),e))})):t(new n.k6(_getErrorMessage(e),e))})),_getRequestParams=(e,t,r,n)=>{const i={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};function _handleRequest(e,t,r,n,i,s){return __awaiter(this,void 0,void 0,(function*(){return new Promise(((o,a)=>{e(r,_getRequestParams(t,n,i,s)).then((e=>{if(!e.ok)throw e;return(null==n?void 0:n.noResolveJson)?e:e.json()})).then((e=>o(e))).catch((e=>handleError(e,a)))}))}))}function get(e,t,r,n){return __awaiter(this,void 0,void 0,(function*(){return _handleRequest(e,"GET",t,r,n)}))}function post(e,t,r,n,i){return __awaiter(this,void 0,void 0,(function*(){return _handleRequest(e,"POST",t,n,i,r)}))}function put(e,t,r,n,i){return __awaiter(this,void 0,void 0,(function*(){return _handleRequest(e,"PUT",t,n,i,r)}))}function remove(e,t,r,n,i){return __awaiter(this,void 0,void 0,(function*(){return _handleRequest(e,"DELETE",t,n,i,r)}))}},3739:(e,t,r)=>{r.d(t,{A:()=>resolveResponse,e:()=>resolveFetch});var __awaiter=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function fulfilled(e){try{step(n.next(e))}catch(t){s(t)}}function rejected(e){try{step(n.throw(e))}catch(t){s(t)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};const resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>__awaiter(void 0,void 0,void 0,(function*(){return yield(yield Promise.resolve().then(r.t.bind(r,1607,23))).fetch(...e)})):fetch),(...e)=>t(...e)},resolveResponse=()=>__awaiter(void 0,void 0,void 0,(function*(){return"undefined"==typeof Response?(yield Promise.resolve().then(r.t.bind(r,1607,23))).Response:Response}))},951:(e,t,r)=>{if(r.d(t,{Z:()=>StorageBucketApi}),523==r.j)var n=r(3786);if(523==r.j)var i=r(2090);if(523==r.j)var s=r(5569);if(523==r.j)var o=r(3739);var __awaiter=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function fulfilled(e){try{step(n.next(e))}catch(t){s(t)}}function rejected(e){try{step(n.throw(e))}catch(t){s(t)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};class StorageBucketApi{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},n.Q),t),this.fetch=(0,o.e)(r)}listBuckets(){return __awaiter(this,void 0,void 0,(function*(){try{return{data:yield(0,s.U2)(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if((0,i.a_)(e))return{data:null,error:e};throw e}}))}getBucket(e){return __awaiter(this,void 0,void 0,(function*(){try{return{data:yield(0,s.U2)(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if((0,i.a_)(t))return{data:null,error:t};throw t}}))}createBucket(e,t={public:!1}){return __awaiter(this,void 0,void 0,(function*(){try{return{data:yield(0,s.v_)(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if((0,i.a_)(r))return{data:null,error:r};throw r}}))}updateBucket(e,t){return __awaiter(this,void 0,void 0,(function*(){try{return{data:yield(0,s.gz)(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if((0,i.a_)(r))return{data:null,error:r};throw r}}))}emptyBucket(e){return __awaiter(this,void 0,void 0,(function*(){try{return{data:yield(0,s.v_)(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if((0,i.a_)(t))return{data:null,error:t};throw t}}))}deleteBucket(e){return __awaiter(this,void 0,void 0,(function*(){try{return{data:yield(0,s.Od)(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if((0,i.a_)(t))return{data:null,error:t};throw t}}))}}},4248:(e,t,r)=>{if(r.d(t,{Z:()=>StorageFileApi}),523==r.j)var n=r(2090);if(523==r.j)var i=r(5569);if(523==r.j)var s=r(3739);var __awaiter=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function fulfilled(e){try{step(n.next(e))}catch(t){s(t)}}function rejected(e){try{step(n.throw(e))}catch(t){s(t)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};const o={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},a={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class StorageFileApi{constructor(e,t={},r,n){this.url=e,this.headers=t,this.bucketId=r,this.fetch=(0,s.e)(n)}uploadOrUpdate(e,t,r,i){return __awaiter(this,void 0,void 0,(function*(){try{let n;const s=Object.assign(Object.assign({},a),i),o=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(s.upsert)});"undefined"!=typeof Blob&&r instanceof Blob?(n=new FormData,n.append("cacheControl",s.cacheControl),n.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?(n=r,n.append("cacheControl",s.cacheControl)):(n=r,o["cache-control"]=`max-age=${s.cacheControl}`,o["content-type"]=s.contentType);const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:n,headers:o},(null==s?void 0:s.duplex)?{duplex:s.duplex}:{}));if(u.ok)return{data:{path:l},error:null};return{data:null,error:yield u.json()}}catch(s){if((0,n.a_)(s))return{data:null,error:s};throw s}}))}upload(e,t,r){return __awaiter(this,void 0,void 0,(function*(){return this.uploadOrUpdate("POST",e,t,r)}))}uploadToSignedUrl(e,t,r,i){return __awaiter(this,void 0,void 0,(function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:a.upsert},i),n=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&r instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?(e=r,e.append("cacheControl",t.cacheControl)):(e=r,n["cache-control"]=`max-age=${t.cacheControl}`,n["content-type"]=t.contentType);const o=yield this.fetch(l.toString(),{method:"PUT",body:e,headers:n});if(o.ok)return{data:{path:s},error:null};return{data:null,error:yield o.json()}}catch(c){if((0,n.a_)(c))return{data:null,error:c};throw c}}))}createSignedUploadUrl(e){return __awaiter(this,void 0,void 0,(function*(){try{let t=this._getFinalPath(e);const r=yield(0,i.v_)(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:this.headers}),s=new URL(this.url+r.url),o=s.searchParams.get("token");if(!o)throw new n.AE("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:o},error:null}}catch(t){if((0,n.a_)(t))return{data:null,error:t};throw t}}))}update(e,t,r){return __awaiter(this,void 0,void 0,(function*(){return this.uploadOrUpdate("PUT",e,t,r)}))}move(e,t){return __awaiter(this,void 0,void 0,(function*(){try{return{data:yield(0,i.v_)(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(r){if((0,n.a_)(r))return{data:null,error:r};throw r}}))}copy(e,t){return __awaiter(this,void 0,void 0,(function*(){try{return{data:{path:(yield(0,i.v_)(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(r){if((0,n.a_)(r))return{data:null,error:r};throw r}}))}createSignedUrl(e,t,r){return __awaiter(this,void 0,void 0,(function*(){try{let n=this._getFinalPath(e),s=yield(0,i.v_)(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},(null==r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers});const o=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(s){if((0,n.a_)(s))return{data:null,error:s};throw s}}))}createSignedUrls(e,t,r){return __awaiter(this,void 0,void 0,(function*(){try{const n=yield(0,i.v_)(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:n.map((e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${s}`):null}))),error:null}}catch(s){if((0,n.a_)(s))return{data:null,error:s};throw s}}))}download(e,t){return __awaiter(this,void 0,void 0,(function*(){const r=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",s=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),o=s?`?${s}`:"";try{const t=this._getFinalPath(e),n=yield(0,i.U2)(this.fetch,`${this.url}/${r}/${t}${o}`,{headers:this.headers,noResolveJson:!0});return{data:yield n.blob(),error:null}}catch(a){if((0,n.a_)(a))return{data:null,error:a};throw a}}))}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],i=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==i&&n.push(i);const s=void 0!==(null==t?void 0:t.transform)?"render/image":"object",o=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==o&&n.push(o);let a=n.join("&");return""!==a&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${r}${a}`)}}}remove(e){return __awaiter(this,void 0,void 0,(function*(){try{return{data:yield(0,i.Od)(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if((0,n.a_)(t))return{data:null,error:t};throw t}}))}list(e,t,r){return __awaiter(this,void 0,void 0,(function*(){try{const n=Object.assign(Object.assign(Object.assign({},o),t),{prefix:e||""});return{data:yield(0,i.v_)(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(s){if((0,n.a_)(s))return{data:null,error:s};throw s}}))}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}},4602:(e,t,r)=>{r.d(t,{Z:()=>SupabaseClient});var n=r(2947),i=r(1607),s=r.n(i),__awaiter=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function fulfilled(e){try{step(n.next(e))}catch(t){s(t)}}function rejected(e){try{step(n.throw(e))}catch(t){s(t)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};class PostgrestBuilder{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=s():this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then((e=>__awaiter(this,void 0,void 0,(function*(){var t,r,n;let i=null,s=null,o=null,a=e.status,l=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=yield e.text();""===t||(s="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const n=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),c=null===(r=e.headers.get("content-range"))||void 0===r?void 0:r.split("/");n&&c&&c.length>1&&(o=parseInt(c[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(s)&&(s.length>1?(i={code:"PGRST116",details:`Results contain ${s.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},s=null,o=null,a=406,l="Not Acceptable"):s=1===s.length?s[0]:null)}else{const t=yield e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(s=[],i=null,a=200,l="OK")}catch(c){404===e.status&&""===t?(a=204,l="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(n=null==i?void 0:i.details)||void 0===n?void 0:n.includes("Results contain 0 rows"))&&(i=null,a=200,l="OK"),i&&this.shouldThrowOnError)throw i}return{error:i,data:s,count:o,status:a,statusText:l}}))));return this.shouldThrowOnError||(r=r.catch((e=>{var t,r,n;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(r=null==e?void 0:e.stack)&&void 0!==r?r:""}`,hint:"",code:`${null!==(n=null==e?void 0:e.code)&&void 0!==n?n:""}`},data:null,count:null,status:0,statusText:""}}))),r.then(e,t)}}class PostgrestTransformBuilder extends PostgrestBuilder{select(e){let t=!1;const r=(null!=e?e:"*").split("").map((e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e))).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n}={}){const i=n?`${n}.order`:"order",s=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${s?`${s},`:""}${e}.${t?"asc":"desc"}${void 0===r?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t}={}){const r=void 0===t?"limit":`${t}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:r}={}){const n=void 0===r?"offset":`${r}.offset`,i=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this.url.searchParams.set(i,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:s="text"}={}){const o=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),a=this.headers.Accept;return this.headers.Accept=`application/vnd.pgrst.plan+${s}; for="${a}"; options=${o};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class PostgrestFilterBuilder extends PostgrestTransformBuilder{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=t.map((e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`)).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let i="";"plain"===n?i="pl":"phrase"===n?i="ph":"websearch"===n&&(i="w");const s=void 0===r?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${s}.${t}`),this}match(e){return Object.entries(e).forEach((([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)})),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t}={}){const r=t?`${t}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}}class PostgrestQueryBuilder{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=t,this.schema=r,this.fetch=n}select(e,{head:t=!1,count:r}={}){const n=t?"HEAD":"GET";let i=!1;const s=(null!=e?e:"*").split("").map((e=>/\s/.test(e)&&!i?"":('"'===e&&(i=!i),e))).join("");return this.url.searchParams.set("select",s),r&&(this.headers.Prefer=`count=${r}`),new PostgrestFilterBuilder({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){const n=[];if(this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),r||n.push("missing=default"),this.headers.Prefer=n.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","))}}return new PostgrestFilterBuilder({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:i=!0}={}){const s=[`resolution=${r?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),i||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","))}}return new PostgrestFilterBuilder({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),this.headers.Prefer=r.join(","),new PostgrestFilterBuilder({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new PostgrestFilterBuilder({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const o={"X-Client-Info":"postgrest-js/1.7.2"};class PostgrestClient{constructor(e,{headers:t={},schema:r,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},o),t),this.schema=r,this.fetch=n}from(e){const t=new URL(`${this.url}/${e}`);return new PostgrestQueryBuilder(t,{headers:Object.assign({},this.headers),schema:this.schema,fetch:this.fetch})}rpc(e,t={},{head:r=!1,count:n}={}){let i;const s=new URL(`${this.url}/rpc/${e}`);let o;r?(i="HEAD",Object.entries(t).forEach((([e,t])=>{s.searchParams.append(e,`${t}`)}))):(i="POST",o=t);const a=Object.assign({},this.headers);return n&&(a.Prefer=`count=${n}`),new PostgrestFilterBuilder({method:i,url:s,headers:a,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}}var a=r(6832),l=r(9677);const c={"X-Client-Info":"supabase-js/2.31.0"};var u=r(3362),h=r(3730),d=r(729),SupabaseClient_awaiter=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function fulfilled(e){try{step(n.next(e))}catch(t){s(t)}}function rejected(e){try{step(n.throw(e))}catch(t){s(t)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};const f={headers:c},p={schema:"public"},v={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},m={};class SupabaseClient{constructor(e,t,r){var n,i,s,o,a,l,c,d;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const g=(0,h.n4)(e);this.realtimeUrl=`${g}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${g}/auth/v1`,this.storageUrl=`${g}/storage/v1`,this.functionsUrl=`${g}/functions/v1`;const y=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,_={db:p,realtime:m,auth:Object.assign(Object.assign({},v),{storageKey:y}),global:f},b=(0,h.PQ)(null!=r?r:{},_);this.storageKey=null!==(i=null===(n=b.auth)||void 0===n?void 0:n.storageKey)&&void 0!==i?i:"",this.headers=null!==(o=null===(s=b.global)||void 0===s?void 0:s.headers)&&void 0!==o?o:{},this.auth=this._initSupabaseAuthClient(null!==(a=b.auth)&&void 0!==a?a:{},this.headers,null===(l=b.global)||void 0===l?void 0:l.fetch),this.fetch=(0,u.ri)(t,this._getAccessToken.bind(this),null===(c=b.global)||void 0===c?void 0:c.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},b.realtime)),this.rest=new PostgrestClient(`${g}/rest/v1`,{headers:this.headers,schema:null===(d=b.db)||void 0===d?void 0:d.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new n.b(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new l.K(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}rpc(e,t={},r){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return SupabaseClient_awaiter(this,void 0,void 0,(function*(){const{data:r}=yield this.auth.getSession();return null!==(t=null===(e=r.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null}))}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,storageKey:i,flowType:s,debug:o},a,l){const c={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new d.$({url:this.authUrl,headers:Object.assign(Object.assign({},c),a),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,flowType:s,debug:o,fetch:l})}_initRealtimeClient(e){return new a.VH(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange(((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)}))}_handleTokenChanged(e,t,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===r?"SIGNED_OUT"===e&&(this.realtime.setAuth(this.supabaseKey),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.realtime.setAuth(null!=r?r:null),this.changedAccessToken=r)}}},729:(e,t,r)=>{r.d(t,{$:()=>SupabaseAuthClient});var n=r(8873);class SupabaseAuthClient extends(523==r.j?n.ak:null){constructor(e){super(e)}}},3362:(e,t,r)=>{r.d(t,{ri:()=>fetchWithAuth});var n=r(1607),i=r.n(n),__awaiter=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function fulfilled(e){try{step(n.next(e))}catch(t){s(t)}}function rejected(e){try{step(n.throw(e))}catch(t){s(t)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};const resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?i():fetch),(...e)=>t(...e)},fetchWithAuth=(e,t,r)=>{const i=resolveFetch(r),s="undefined"==typeof Headers?n.Headers:Headers;return(r,n)=>__awaiter(void 0,void 0,void 0,(function*(){var o;const a=null!==(o=yield t())&&void 0!==o?o:e;let l=new s(null==n?void 0:n.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${a}`),i(r,Object.assign(Object.assign({},n),{headers:l}))}))}},3730:(e,t,r)=>{function stripTrailingSlash(e){return e.replace(/\/$/,"")}r.d(t,{PQ:()=>applySettingDefaults,n4:()=>stripTrailingSlash});function applySettingDefaults(e,t){const{db:r,auth:n,realtime:i,global:s}=e,{db:o,auth:a,realtime:l,global:c}=t;return{db:Object.assign(Object.assign({},o),r),auth:Object.assign(Object.assign({},a),n),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},c),s)}}},1607:function(e,t){var r="undefined"!=typeof self?self:this,n=function(){function F(){this.fetch=!1,this.DOMException=r.DOMException}return F.prototype=r,new F}();!function(e){!function(t){var r="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,i="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),s="FormData"in e,o="ArrayBuffer"in e;if(o)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function normalizeName(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function normalizeValue(e){return"string"!=typeof e&&(e=String(e)),e}function iteratorFor(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function Headers(e){this.map={},e instanceof Headers?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function consumed(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function fileReaderReady(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function readBlobAsArrayBuffer(e){var t=new FileReader,r=fileReaderReady(t);return t.readAsArrayBuffer(e),r}function bufferClone(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function Body(){return this.bodyUsed=!1,this._initBody=function(e){this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:i&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:s&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():o&&i&&function isDataView(e){return e&&DataView.prototype.isPrototypeOf(e)}(e)?(this._bodyArrayBuffer=bufferClone(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o&&(ArrayBuffer.prototype.isPrototypeOf(e)||l(e))?this._bodyArrayBuffer=bufferClone(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var e=consumed(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?consumed(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(readBlobAsArrayBuffer)}),this.text=function(){var e=consumed(this);if(e)return e;if(this._bodyBlob)return function readBlobAsText(e){var t=new FileReader,r=fileReaderReady(t);return t.readAsText(e),r}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function readArrayBufferAsText(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(decode)}),this.json=function(){return this.text().then(JSON.parse)},this}Headers.prototype.append=function(e,t){e=normalizeName(e),t=normalizeValue(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},Headers.prototype.delete=function(e){delete this.map[normalizeName(e)]},Headers.prototype.get=function(e){return e=normalizeName(e),this.has(e)?this.map[e]:null},Headers.prototype.has=function(e){return this.map.hasOwnProperty(normalizeName(e))},Headers.prototype.set=function(e,t){this.map[normalizeName(e)]=normalizeValue(t)},Headers.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},Headers.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),iteratorFor(e)},Headers.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),iteratorFor(e)},Headers.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),iteratorFor(e)},n&&(Headers.prototype[Symbol.iterator]=Headers.prototype.entries);var c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Request(e,t){var r=(t=t||{}).body;if(e instanceof Request){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new Headers(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new Headers(t.headers)),this.method=function normalizeMethod(e){var t=e.toUpperCase();return c.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function decode(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}})),t}function Response(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new Headers(t.headers),this.url=t.url||"",this._initBody(e)}Request.prototype.clone=function(){return new Request(this,{body:this._bodyInit})},Body.call(Request.prototype),Body.call(Response.prototype),Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})},Response.error=function(){var e=new Response(null,{status:0,statusText:""});return e.type="error",e};var u=[301,302,303,307,308];Response.redirect=function(e,t){if(-1===u.indexOf(t))throw new RangeError("Invalid status code");return new Response(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(h){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function fetch(e,r){return new Promise((function(n,s){var o=new Request(e,r);if(o.signal&&o.signal.aborted)return s(new t.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function abortXhr(){a.abort()}a.onload=function(){var e,t,r={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new Headers,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}})),t)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var i="response"in a?a.response:a.responseText;n(new Response(i,r))},a.onerror=function(){s(new TypeError("Network request failed"))},a.ontimeout=function(){s(new TypeError("Network request failed"))},a.onabort=function(){s(new t.DOMException("Aborted","AbortError"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&i&&(a.responseType="blob"),o.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),o.signal&&(o.signal.addEventListener("abort",abortXhr),a.onreadystatechange=function(){4===a.readyState&&o.signal.removeEventListener("abort",abortXhr)}),a.send(void 0===o._bodyInit?null:o._bodyInit)}))}fetch.polyfill=!0,e.fetch||(e.fetch=fetch,e.Headers=Headers,e.Request=Request,e.Response=Response),t.Headers=Headers,t.Request=Request,t.Response=Response,t.fetch=fetch,Object.defineProperty(t,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;(t=i.fetch).default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t},47:(e,t,r)=>{var n;if("object"==typeof globalThis)n=globalThis;else try{n=r(4966)}catch(o){}finally{if(n||"undefined"==typeof window||(n=window),!n)throw new Error("Could not determine global this")}var i=n.WebSocket||n.MozWebSocket,s=r(6695);function W3CWebSocket(e,t){return t?new i(e,t):new i(e)}i&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(W3CWebSocket,e,{get:function(){return i[e]}})})),e.exports={w3cwebsocket:i?W3CWebSocket:null,version:s}},6695:(e,t,r)=>{e.exports=r(2620).version},4966:e=>{var naiveFallback=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;if("object"==typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return naiveFallback()}try{return __global__||naiveFallback()}finally{delete Object.prototype.__global__}}()},9924:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});var n=r(4602);r(8873),r(6832);var i,s,o;const a=(i="https://qomjtmghzfzgtbhyjwug.supabase.co",s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFvbWp0bWdoemZ6Z3RiaHlqd3VnIiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTA4MTk2OTcsImV4cCI6MjAwNjM5NTY5N30.icfKE-9w-Gu2r50Ogl2HnxsYNVCATVslpcsKPFvs_dk",new n.Z(i,s,o))},7848:(e,t,r)=>{r.d(t,{Z:()=>v});var n=r(8910),i=r(6135),s=r(5634),o=r(5843),a=r(1774),l=r(2074);const c=function component_component(e){return(0,s.ZP)(a.ZP,{type:"email",id:"email",name:"email",required:!0,pattern:l.Z,onBlur:t=>e.onChange(t),onChange:t=>e.onChange(t),onInvalid:t=>e.onChange(t),value:e.value},(0,s.ZP)(a.__,null,"Email"),(0,s.ZP)(o.Z,{when:e.validity},(0,s.ZP)(a.C,{equal:"required"},"Email is required"),(0,s.ZP)(a.C,{equal:"pattern"},"Invalid Eamil")))};var u,h,d,f=r(7447),__decorate=function(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o},__classPrivateFieldGet=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},__classPrivateFieldSet=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r};let p=class Email{get validity(){var e;return __classPrivateFieldSet(this,u,null!==(e=__classPrivateFieldGet(this,u,"f"))&&void 0!==e?e:"","f")}get value(){var e;return __classPrivateFieldSet(this,h,null!==(e=__classPrivateFieldGet(this,h,"f"))&&void 0!==e?e:"","f")}constructor(e){u.set(this,void 0),h.set(this,void 0),__classPrivateFieldSet(this,h,e.value,"f")}onChange(e){return __classPrivateFieldSet(this,h,e,"f"),this}[(u=new WeakMap,h=new WeakMap,d=f.Z.Ok)](e){return __classPrivateFieldSet(this,u,e,"f"),this}};__decorate([n.Z,i.C,i.u(l.Z)],p.prototype,"onChange",null),__decorate([s.vK],p.prototype,d,null),p=__decorate([(0,s.Kf)(c)],p);const v=p},2074:(e,t,r)=>{r.d(t,{Z:()=>n});const n="[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?"},2301:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(2395),i=r(5634);const s=r.p+"memoize.675d6c1b3b0d51f32588dcab51fcfb4f.svg";const o=r(8917).Z`
  .logo {
    aspect-ratio: 1 / 1;
    cursor: pointer;
    object-fit: cover;
    width: 80px;
  }
`;const a=function component(){return(0,i.ZP)("img",{className:o.logo,src:s,alt:"Memoize",loading:"auto",onClick:()=>location.assign((0,n.uH)("home"))})}},312:(e,t,r)=>{r.d(t,{Z:()=>m});var n=r(8910),i=r(6135),s=r(5634),o=r(5843),a=r(1774),l=r(4467);const c=function component_component(e){return(0,s.ZP)(a.ZP,{type:"password",id:"password",name:"password",required:!0,onBlur:t=>e.onChange(t),onChange:t=>e.onChange(t),onInvalid:t=>e.onChange(t),value:e.value},(0,s.ZP)(a.__,null,"Password"),(0,s.ZP)(o.Z,{when:e.validity},(0,s.ZP)(a.C,{equal:"required"},"Password is required")),(0,s.ZP)(l.Z,{when:e.supporting},(0,s.ZP)(a.C,null,"Must be at least 8 characters")))};const u=function props(e){return new Proxy((function(){const[t]=arguments,r=this instanceof e?new e(...arguments):e(...arguments),n={get(e,r){var n,i;const s=Reflect.has(e,r)?Reflect.get(e,r):Reflect.get(t,r);return null!==(i=null===(n=null==s?void 0:s.bind)||void 0===n?void 0:n.call(s,e))&&void 0!==i?i:s},set:(e,t,r)=>(Reflect.set(e,t,r),!0)};return new Proxy(r,n)}),{get:(t,r)=>Reflect.get(e,r),set:(t,r,n)=>(Reflect.set(e,r,n),!0)})};var h,d,f,p=r(7447),__decorate=function(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o},__classPrivateFieldGet=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},__classPrivateFieldSet=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r};let v=class Password{get validity(){var e;return __classPrivateFieldSet(this,h,null!==(e=__classPrivateFieldGet(this,h,"f"))&&void 0!==e?e:"","f")}get value(){var e;return __classPrivateFieldSet(this,d,null!==(e=__classPrivateFieldGet(this,d,"f"))&&void 0!==e?e:"","f")}constructor(e){h.set(this,void 0),d.set(this,void 0),__classPrivateFieldSet(this,d,e.value,"f")}onChange(e){return __classPrivateFieldSet(this,d,e,"f"),this}[(h=new WeakMap,d=new WeakMap,f=p.Z.Ok)](e){return __classPrivateFieldSet(this,h,e,"f"),this}};__decorate([n.Z,i.C],v.prototype,"onChange",null),__decorate([s.vK],v.prototype,f,null),v=__decorate([(0,s.Kf)(c),u],v);const m=v},5843:(e,t,r)=>{r.d(t,{Z:()=>n});const n=523==r.j?function component(e,t){const{when:r}=e;return t.filter((e=>{const t=[...e.attributes],{value:n}=t.find((({key:e})=>"equal"===e));return r===n}))}:null},4467:(e,t,r)=>{r.d(t,{Z:()=>n});const n=523==r.j?function show(e,t){return e.when?t:[]}:null},7950:(e,t,r)=>{r.d(t,{Z:()=>c});const n=["complete","danger","info","master","menu","primary","success","warning"];const i=function background(e){const t=n.find((t=>e[t]));return t?`var(--color-${t})`:"var(--color-pure-white)"},s=["complete","danger","info","master","menu","primary","success","warning"];const o=function border(e){const t=s.find((t=>e[t]));return t?`var(--color-${t})`:"var(--color-master)"},a=["complete","danger","info","master","menu","primary","success","warning"];const l=function color_border(e){return a.some((t=>e[t]))?"var(--color-pure-white)":"var(--color-master)"};const c=r(145).Z.button`
  align-items: center;
  background-color: ${i};
  border: var(--border-width-hairline) solid ${o};
  border-radius: var(--border-radius-sm);
  color: ${l};
  cursor: pointer;
  display: flex;
  font-family: var(--font-family-base);
  font-size: var(--font-size-xxs);
  font-weight: var(--font-weight-medium);
  gap: var(--spacing_inset-nano);
  height: 42px;
  justify-content: center;
  line-height: var(--line-height-default);
  padding: var(--spacing_inset-nano) var(--spacing_inset-xs);
`},7720:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(5634),i=r(8485),s=r(7227);const o=function component(e,t){return(0,n.ZP)(i.Z.Form,Object.assign({},e,{onSubmit:t=>{var r;return(0,s.Z)(t)&&(null===(r=e.onSubmit)||void 0===r?void 0:r.call(e,t))},column:!0,sm:!0,novalidate:!0}),t)}},7227:(e,t,r)=>{r.d(t,{Z:()=>n});const n=523==r.j?function validity(e){return Array.from(e.target.querySelectorAll("input")).every((e=>!!e.validity.valid||(e.dispatchEvent(new Event("invalid")),!1)))}:null},1774:(e,t,r)=>{r.d(t,{__:()=>l,C:()=>c,ZP:()=>a});var n=r(5634),i=r(4467);const s=r(8917).Z`
  .input__container {
    display: flex;
    flex-direction: column;
    gap: var(--spacing_inset-nano);
    position: relative;
    width: 100%;
  }

  .input {
    appearance: none;
    background-color: transparent;
    border: var(--border-width-hairline) solid var(--color-master);
    border-radius: var(--border-radius-sm);
    color: var(--color-master-dark);
    font-family: var(--font-family-base);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-regular);
    height: 42px;
    line-height: var(--line-height-default);
    padding: 0 var(--spacing_inset-xs);
    width: 100%;
  }

  .input:hover,
  .input:focus,
  .input:active {
    outline: 0;
  }

  .input:-webkit-autofill,
  .input:-webkit-autofill:hover, 
  .input:-webkit-autofill:focus, 
  .input:-webkit-autofill:active {
    transition: background-color 9999999999s ease-in-out 0s
  }

  .input::placeholder {
    color: var(--color-master);
  }
`;var o=r(5282);const a=function component(e,t){return(0,n.ZP)("div",{className:[s.input__container,e.className]},(0,n.ZP)(o.Z.Label,{master:!0,dark:!0,xxs:!0,medium:!0,for:e.id},t.label),(0,n.ZP)("input",Object.assign({},e,{className:s.input,autocomplete:"off"})),(0,n.ZP)(i.Z,{when:t.supporting},t.supporting))};const l=function label_component(e,t){return(0,n.ZP)(n.HY,{slot:"label"},t)};const c=function supporting_component(e,t){return(0,n.ZP)(o.Z.Span,Object.assign({},e,{slot:"supporting",master:!0,xxxs:!0}),t)}},8485:(e,t,r)=>{r.d(t,{Z:()=>f});const n=["top","middle","bottom"],i={top:"start",middle:"center",bottom:"end"};const s=function align(e){var t;return null!==(t=i[n.find((t=>e[t]))])&&void 0!==t?t:i.top},o=["start","center","end"];const a=function content(e){var t;return null!==(t=o.find((t=>e[t])))&&void 0!==t?t:"start"},l=["row","column"];const c=function direction(e){var t;return null!==(t=l.find((t=>e[t])))&&void 0!==t?t:"row"},u=["quarck","nano","xs","sm","md","lg","huge","giant"];const h=function gap(e){var t;return`var(--spacing_inset-${null!==(t=u.find((t=>e[t])))&&void 0!==t?t:"xs"})`};var d=r(145);const f=new Proxy({},{get:(e,t)=>d.Z[t]`
      align-items: ${s};
      display: flex;
      flex-direction: ${c};
      gap: ${h};
      justify-content: ${a};
      width: 100%;
    `})},5282:(e,t,r)=>{r.d(t,{Z:()=>v});const n=["left","center","right"];const i=function align(e){var t;return null!==(t=n.find((t=>e[t])))&&void 0!==t?t:"inherit"},s=["complete","danger","info","master","menu","primary","success","warning"],o=["darkest","darker","dark","light","lighter","lightest"];const a=function color(e){var t;return`var(--color-${[null!==(t=s.find((t=>e[t])))&&void 0!==t?t:"master",o.find((t=>e[t]))].filter(Boolean).join("-")})`},l=["base","highlight"];const c=function family(e){var t;return`var(--font-family-${null!==(t=l.find((t=>e[t])))&&void 0!==t?t:"base"})`},u=["xxxs","xxs","xs","sm","md","lg","xl","xxl","xxxl","display","giant"];const h=function size(e){var t;return`var(--font-size-${null!==(t=u.find((t=>e[t])))&&void 0!==t?t:"xs"})`};var d=r(145);const f=["bold","medium","regular"];const p=function weight(e){var t;return`var(--font-weight-${null!==(t=f.find((t=>e[t])))&&void 0!==t?t:"regular"})`},v=new Proxy({},{get:(e,t)=>d.Z[t]`
      color: ${a};
      font-family: ${c};
      font-size: ${h};
      font-weight: ${p};
      line-height: var(--line-height-sm);
      text-align: ${i};
    `})},1861:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(8917),i=r(5634);const s=function component(e,t){return(0,i.ZP)(i.HY,null,(0,i.ZP)(n.b,null),t)}},196:(e,t,r)=>{r.r(t),r.d(t,{default:()=>T});var n=r(5634),i=r(2395),s=r(5282),o=r(1768),a=r(9318);const l={clickToResend:{[a.Z.EN]:"Click to resend",[a.Z.ES]:"Click to resend",[a.Z.PT]:"Click to resend"},description:{[a.Z.EN]:"We sent a password reset link to",[a.Z.ES]:"We sent a password reset link to",[a.Z.PT]:"We sent a password reset link to"},footer:{[a.Z.EN]:"Didn't receive the email?",[a.Z.ES]:"Didn't receive the email?",[a.Z.PT]:"Didn't receive the email?"},logIn:{[a.Z.EN]:"Back to log in",[a.Z.ES]:"Back to log in",[a.Z.PT]:"Back to log in"},openEmailApp:{[a.Z.EN]:"Open email app",[a.Z.ES]:"Open email app",[a.Z.PT]:"Open email app"},title:{[a.Z.EN]:"Check your email?",[a.Z.ES]:"Check your email?",[a.Z.PT]:"Check your email?"}},c=(0,o.Z)(l);const u=function component(){return(0,n.ZP)(s.Z.A,{href:(0,i.uH)("checkYourEmail"),primary:!0,xxs:!0,medium:!0},c.clickToResend)};const h=function logIn_component(){return(0,n.ZP)(s.Z.A,{href:(0,i.uH)("logIn"),primary:!0,xxs:!0,medium:!0},c.logIn)};var d=r(8485);const f=function footer_component(){return(0,n.ZP)(d.Z.Footer,{column:!0},(0,n.ZP)(d.Z.Div,{center:!0,nano:!0},(0,n.ZP)(s.Z.Span,{master:!0,xxs:!0},c.footer),(0,n.ZP)(u,null)),(0,n.ZP)(d.Z.Div,{center:!0},(0,n.ZP)(h,null)))};var p=r(7720);const v=function email_component(){return(0,n.ZP)(s.Z.Strong,{master:!0,dark:!0,xxs:!0,medium:!0},i.WC.email)};var m=r(2301);const g=function header_component(){return(0,n.ZP)(d.Z.Header,{column:!0,middle:!0,giant:!0},(0,n.ZP)(m.Z,null),(0,n.ZP)(d.Z.HGroup,{column:!0,middle:!0,quarck:!0},(0,n.ZP)(s.Z.H1,{master:!0,dark:!0,highlight:!0,md:!0,bold:!0},c.title),(0,n.ZP)(s.Z.H2,{master:!0,dark:!0,xxs:!0,center:!0},c.description,(0,n.ZP)("br",null),(0,n.ZP)(v,null))))};var y=r(1861);const _=r(8917).Z`
  .checkYourEmail__main {
    height: 100vh;
    margin: 0 auto;
    max-width: 408px;
    padding: var(--spacing_inset-xs);
  }

  .checkYourEmail__openEmailApp {
    width: 100%;
  }
`;const b=function main_component(e,t){return(0,n.ZP)(y.Z,null,(0,n.ZP)(d.Z.Main,{className:_.checkYourEmail__main,column:!0,middle:!0,center:!0,giant:!0},t))};var w=r(7950);const P=function openEmailApp_component(){return(0,n.ZP)(w.Z,{className:_.checkYourEmail__openEmailApp,primary:!0},c.openEmailApp)};const E=function component_component(){return(0,n.ZP)(b,null,(0,n.ZP)(g,null),(0,n.ZP)(p.Z,null,(0,n.ZP)(P,null)),(0,n.ZP)(f,null))};var __decorate=function(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let k=class Auth{};k=__decorate([(0,n.Kf)(E)],k);const T=k},2740:(e,t,r)=>{r.r(t),r.d(t,{default:()=>I});var n=r(6291),i=r(8946),s=r(5634),o=r(2395),a=r(7848),l=r(5282),c=r(1768),u=r(9318);const h={description:{[u.Z.EN]:"No worries, we'll send you reset instructions",[u.Z.ES]:"No worries, we'll send you reset instructions",[u.Z.PT]:"No worries, we'll send you reset instructions"},footer:{[u.Z.EN]:"Already have an account?",[u.Z.ES]:"Already have an account?",[u.Z.PT]:"Already have an account?"},logIn:{[u.Z.EN]:"Back to log in",[u.Z.ES]:"Back to log in",[u.Z.PT]:"Back to log in"},resetPassword:{[u.Z.EN]:"Reset password",[u.Z.ES]:"Reset password",[u.Z.PT]:"Reset password"},title:{[u.Z.EN]:"Forgot Passsword?",[u.Z.ES]:"Forgot Passsword?",[u.Z.PT]:"Forgot Passsword?"}},d=(0,c.Z)(h);const f=function component(){return(0,s.ZP)(l.Z.A,{href:(0,o.uH)("logIn"),primary:!0,xxs:!0,medium:!0},d.logIn)};var p=r(8485);const v=function footer_component(){return(0,s.ZP)(p.Z.Footer,{center:!0},(0,s.ZP)(f,null))};var m=r(7720),g=r(2301);const y=function header_component(){return(0,s.ZP)(p.Z.Header,{column:!0,middle:!0,giant:!0},(0,s.ZP)(g.Z,null),(0,s.ZP)(p.Z.HGroup,{column:!0,middle:!0,quarck:!0},(0,s.ZP)(l.Z.H1,{master:!0,dark:!0,highlight:!0,md:!0,bold:!0},d.title),(0,s.ZP)(l.Z.H2,{master:!0,dark:!0,xxs:!0},d.description)))};var _=r(1861);const b=r(8917).Z`
  .forgotPassword__main {
    height: 100vh;
    margin: 0 auto;
    max-width: 408px;
    padding: var(--spacing_inset-xs);
  }

  .forgotPassword__resetPassword {
    width: 100%;
  }
`;const w=function main_component(e,t){return(0,s.ZP)(_.Z,null,(0,s.ZP)(p.Z.Main,{className:b.forgotPassword__main,column:!0,middle:!0,center:!0,giant:!0},t))};var P=r(7950);const E=function resetPassword_component(){return(0,s.ZP)(P.Z,{className:b.forgotPassword__resetPassword,primary:!0},d.resetPassword)};const k=function component_component(e){return(0,s.ZP)(w,null,(0,s.ZP)(y,null),(0,s.ZP)(m.Z,{onSubmit:t=>e.forgotPassword(t)},(0,s.ZP)(a.Z,null),(0,s.ZP)(E,null)),(0,s.ZP)(v,null))};var T=r(2055),S=r(8335),j=r(9924);const{onError:x,onPasswordReset:O}=S.default,R=(0,T.Z)((function(e,t){return setImmediate((()=>{const{email:e}=this,t=(0,o.uH)("setNewPassword");j.default.auth.resetPasswordForEmail(e,{redirectTo:t}).then((({data:e,error:t})=>{var r,n;return t?null===(r=this[x])||void 0===r?void 0:r.call(this,t):null===(n=this[O])||void 0===n?void 0:n.call(this,e)}))})),t(...e)})),C={resetPassword:R,onPasswordReset:O,onError:x};var Z,A,__decorate=function(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o},__classPrivateFieldGet=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},__classPrivateFieldSet=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r};let $=class Auth{constructor(){Z.set(this,void 0)}get email(){var e;return __classPrivateFieldSet(this,Z,null!==(e=__classPrivateFieldGet(this,Z,"f"))&&void 0!==e?e:"","f")}forgotPassword(e){return __classPrivateFieldSet(this,Z,e.email,"f"),this}[(Z=new WeakMap,A=C.onError)](){return __classPrivateFieldSet(this,Z,"","f"),this}[C.onPasswordReset](){return location.assign((0,o.uH)("checkYourEmail")),this}};__decorate([n.Z,i.Z,C.resetPassword],$.prototype,"forgotPassword",null),__decorate([s.vK],$.prototype,A,null),$=__decorate([(0,s.Kf)(k)],$);const I=$},3354:(e,t,r)=>{r.r(t),r.d(t,{default:()=>H});var n=r(6291),i=r(8946),s=r(5634),o=r(2395),a=r(2453),l=r(2055);const c=(0,l.Z)((function(e,t){const[{session:r,user:n}]=e;return a.Z.access_token=r.access_token,a.Z.name=n.app_metadata.name,t(...e)})),u={setUser:c};var h=r(7848),d=r(5282),f=r(1768),p=r(9318);const v={description:{[p.Z.EN]:"Welcome back! Please enter your details",[p.Z.ES]:"Welcome back! Please enter your details",[p.Z.PT]:"Welcome back! Please enter your details"},footer:{[p.Z.EN]:"Don't have an account?",[p.Z.ES]:"Don't have an account?",[p.Z.PT]:"Don't have an account?"},forgotPassword:{[p.Z.EN]:"Forgot password",[p.Z.ES]:"Forgot password",[p.Z.PT]:"Forgot password"},title:{[p.Z.EN]:"Log in to your account",[p.Z.ES]:"Log in to your account",[p.Z.PT]:"Log in to your account"},signIn:{[p.Z.EN]:"Sign in",[p.Z.ES]:"Sign in",[p.Z.PT]:"Sign in"},signUp:{[p.Z.EN]:"Sign up",[p.Z.ES]:"Sign up",[p.Z.PT]:"Sign up"}},m=(0,f.Z)(v);const g=function component(){return(0,s.ZP)(d.Z.A,{href:(0,o.uH)("signUp"),primary:!0,xxs:!0,medium:!0},m.signUp)};var y=r(8485);const _=function footer_component(){return(0,s.ZP)(y.Z.Footer,{center:!0,nano:!0},(0,s.ZP)(d.Z.Span,{master:!0,xxs:!0},m.footer),(0,s.ZP)(g,null))};const b=r(8917).Z`
  .login__main {
    height: 100vh;
    margin: 0 auto;
    max-width: 408px;
    padding: var(--spacing_inset-xs);
  }

  .login__forgotPassword {
    margin-left: auto;
    margin-top: calc(var(--spacing_inset-xs) * -1);
  }

  .login__signIn {
    width: 100%;
  }
`;const w=function forgotPassword_component(){return(0,s.ZP)(d.Z.A,{className:b.login__forgotPassword,href:(0,o.uH)("forgotPassword"),primary:!0,xxs:!0,medium:!0},m.forgotPassword)};var P=r(7720),E=r(2301);const k=function header_component(){return(0,s.ZP)(y.Z.Header,{column:!0,middle:!0,giant:!0},(0,s.ZP)(E.Z,null),(0,s.ZP)(y.Z.HGroup,{column:!0,middle:!0,quarck:!0},(0,s.ZP)(d.Z.H1,{master:!0,dark:!0,highlight:!0,md:!0,bold:!0},m.title),(0,s.ZP)(d.Z.H2,{master:!0,dark:!0,xxs:!0},m.description)))};var T=r(1861);const S=function main_component(e,t){return(0,s.ZP)(T.Z,null,(0,s.ZP)(y.Z.Main,{className:b.login__main,column:!0,middle:!0,center:!0,giant:!0},t))};var j=r(312),x=r(7950);const O=function signIn_component(){return(0,s.ZP)(x.Z,{className:b.login__signIn,primary:!0},m.signIn)};const R=function component_component(e){return(0,s.ZP)(S,null,(0,s.ZP)(k,null),(0,s.ZP)(P.Z,{onSubmit:t=>e.logIn(t)},(0,s.ZP)(h.Z,{value:e.email}),(0,s.ZP)(j.Z,{value:e.password}),(0,s.ZP)(w,null),(0,s.ZP)(O,null)),(0,s.ZP)(_,null))};var C=r(8335),Z=r(9924);const{onAuthenticated:A,onInvalid:$}=C.default,I=(0,l.Z)((function(e,t){return setImmediate((()=>{const{email:e,password:t}=this;Z.default.auth.signInWithPassword({email:e,password:t}).then((({data:e,error:t})=>{var r,n;return t?null===(r=this[$])||void 0===r?void 0:r.call(this,t):null===(n=this[A])||void 0===n?void 0:n.call(this,e)}))})),t(...e)})),D={authenticate:I,onAuthenticated:A,onInvalid:$};var N,U,L,q,__decorate=function(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o},__classPrivateFieldGet=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},__classPrivateFieldSet=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r};let B=class Auth{constructor(){N.set(this,void 0),U.set(this,void 0)}get email(){var e;return __classPrivateFieldSet(this,N,null!==(e=__classPrivateFieldGet(this,N,"f"))&&void 0!==e?e:"","f")}get password(){var e;return __classPrivateFieldSet(this,U,null!==(e=__classPrivateFieldGet(this,U,"f"))&&void 0!==e?e:"","f")}logIn(e){return __classPrivateFieldSet(this,N,e.email,"f"),__classPrivateFieldSet(this,U,e.password,"f"),this}[(N=new WeakMap,U=new WeakMap,L=D.onAuthenticated)](e){return location.assign((0,o.uH)("home")),this}[q=D.onInvalid](){return __classPrivateFieldSet(this,U,"","f"),this}};__decorate([n.Z,i.Z,D.authenticate],B.prototype,"logIn",null),__decorate([u.setUser],B.prototype,L,null),__decorate([s.vK],B.prototype,q,null),B=__decorate([(0,s.Kf)(R)],B);const H=B},5085:(e,t,r)=>{r.r(t),r.d(t,{default:()=>V});var n=r(6291),i=r(8946),s=r(5634),o=r(2395),a=r(7848),l=r(5282),c=r(1768),u=r(9318);const h={description:{[u.Z.EN]:"Start your free trial",[u.Z.ES]:"Start your free trial",[u.Z.PT]:"Start your free trial"},footer:{[u.Z.EN]:"Already have an account?",[u.Z.ES]:"Already have an account?",[u.Z.PT]:"Already have an account?"},getStarted:{[u.Z.EN]:"Get started",[u.Z.ES]:"Get started",[u.Z.PT]:"Get started"},logIn:{[u.Z.EN]:"Log in",[u.Z.ES]:"Log in",[u.Z.PT]:"Log in"},title:{[u.Z.EN]:"Create an account",[u.Z.ES]:"Create an account",[u.Z.PT]:"Create an account"}},d=(0,c.Z)(h);const f=function component(){return(0,s.ZP)(l.Z.A,{href:(0,o.uH)("logIn"),primary:!0,xxs:!0,medium:!0},d.logIn)};var p=r(8485);const v=function footer_component(){return(0,s.ZP)(p.Z.Footer,{center:!0,nano:!0},(0,s.ZP)(l.Z.Span,{master:!0,xxs:!0},d.footer),(0,s.ZP)(f,null))};var m=r(7720),g=r(7950);const y=r(8917).Z`
  .signUp__main {
    height: 100vh;
    margin: 0 auto;
    max-width: 408px;
    padding: var(--spacing_inset-xs);
  }

  .signUp__getStarted {
    width: 100%;
  }
`;const _=function getStarted_component(){return(0,s.ZP)(g.Z,{className:y.signUp__getStarted,primary:!0},d.getStarted)};var b=r(2301);const w=function header_component(){return(0,s.ZP)(p.Z.Header,{column:!0,middle:!0,giant:!0},(0,s.ZP)(b.Z,null),(0,s.ZP)(p.Z.HGroup,{column:!0,middle:!0,quarck:!0},(0,s.ZP)(l.Z.H1,{master:!0,dark:!0,highlight:!0,md:!0,bold:!0},d.title),(0,s.ZP)(l.Z.H2,{master:!0,dark:!0,xxs:!0},d.description)))};var P=r(1861);const E=function main_component(e,t){return(0,s.ZP)(P.Z,null,(0,s.ZP)(p.Z.Main,{className:y.signUp__main,column:!0,middle:!0,center:!0,giant:!0},t))};var k=r(8910),T=r(6135),S=r(5843),j=r(1774);const x=function component_component(e){return(0,s.ZP)(j.ZP,{type:"text",id:"name",name:"name",required:!0,onBlur:t=>e.onChange(t),onChange:t=>e.onChange(t),onInvalid:t=>e.onChange(t),value:e.value},(0,s.ZP)(j.__,null,"Name"),(0,s.ZP)(S.Z,{when:e.validity},(0,s.ZP)(j.C,{equal:"required"},"Name is required")))};var O,R,C,Z=r(7447),__decorate=function(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o},__classPrivateFieldGet=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},__classPrivateFieldSet=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r};let A=class Name{constructor(){O.set(this,void 0),R.set(this,void 0)}get validity(){var e;return __classPrivateFieldSet(this,O,null!==(e=__classPrivateFieldGet(this,O,"f"))&&void 0!==e?e:"","f")}get value(){var e;return __classPrivateFieldSet(this,R,null!==(e=__classPrivateFieldGet(this,R,"f"))&&void 0!==e?e:"","f")}onChange(e){return __classPrivateFieldSet(this,R,e,"f"),this}[(O=new WeakMap,R=new WeakMap,C=Z.Z.Ok)](e){return __classPrivateFieldSet(this,O,e,"f"),this}};__decorate([k.Z,T.C],A.prototype,"onChange",null),__decorate([s.vK],A.prototype,C,null),A=__decorate([(0,s.Kf)(x)],A);const $=A;var I=r(312);const D=function signUp_component_component(e){return(0,s.ZP)(E,null,(0,s.ZP)(w,null),(0,s.ZP)(m.Z,{onSubmit:t=>e.signUp(t)},(0,s.ZP)($,{value:e.name}),(0,s.ZP)(a.Z,{value:e.email}),(0,s.ZP)(I.Z,{value:e.password}),(0,s.ZP)(_,null)),(0,s.ZP)(v,null))};var N=r(2055),U=r(8335),L=r(9924);const{onCreated:q,onInvalid:B}=U.default,H=(0,N.Z)((function(e,t){return setImmediate((()=>{const{email:e,name:t,password:r}=this;L.default.auth.signUp({email:e,password:r,options:{data:{name:t}}}).then((({data:e,error:t})=>{var r,n;return t?null===(r=this[B])||void 0===r?void 0:r.call(this,t):null===(n=this[q])||void 0===n?void 0:n.call(this,e)}))})),t(...e)})),M={create:H,onCreated:q,onInvalid:B};var z,G,K,J,auth_decorate=function(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o},auth_classPrivateFieldGet=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},auth_classPrivateFieldSet=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r};let W=class Auth{constructor(){z.set(this,void 0),G.set(this,void 0),K.set(this,void 0)}get email(){var e;return auth_classPrivateFieldSet(this,z,null!==(e=auth_classPrivateFieldGet(this,z,"f"))&&void 0!==e?e:"","f")}get name(){var e;return auth_classPrivateFieldSet(this,G,null!==(e=auth_classPrivateFieldGet(this,G,"f"))&&void 0!==e?e:"","f")}get password(){var e;return auth_classPrivateFieldSet(this,K,null!==(e=auth_classPrivateFieldGet(this,K,"f"))&&void 0!==e?e:"","f")}signUp(e){return auth_classPrivateFieldSet(this,z,e.email,"f"),auth_classPrivateFieldSet(this,G,e.name,"f"),auth_classPrivateFieldSet(this,K,e.password,"f"),this}[(z=new WeakMap,G=new WeakMap,K=new WeakMap,M.onCreated)](e){return location.assign((0,o.uH)("login")),this}[J=M.onInvalid](){return auth_classPrivateFieldSet(this,K,"","f"),this}};auth_decorate([n.Z,i.Z,M.create],W.prototype,"signUp",null),auth_decorate([s.vK],W.prototype,J,null),W=auth_decorate([(0,s.Kf)(D)],W);const V=W},4088:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Z});var n=r(5634);const i=function textContent(e,t,r){const n=r.value;Object.assign(r,{value(e){const t=e instanceof Event?e.target.textContent:e;return Reflect.apply(n,this,[t])}})};var s=r(8917);const o=s.Z`
  .back {
    color: var(--color-master-dark);
    cursor: text;
    font-family: var(--font-family-base);
    font-size: var(--font-size-xxs);
    font-weight: var(--font-weight-regular);
    line-height: var(--line-height-lg);
    outline: none;
    padding: var(--spacing_inset-nano);
  }

  .back:empty::before {
    color: var(--color-master-light);
    content: 'Write the back here...';
    display: block;
  }
`;const a=function component(e){return(0,n.ZP)("div",{className:o.back,onInput:t=>e.change(t),contenteditable:!0})};var l,c,__decorate=function(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o},__classPrivateFieldGet=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},__classPrivateFieldSet=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r};let u=c=class Back{constructor(){l.set(this,void 0)}get validity(){return Boolean(this.value)}get value(){var e;return __classPrivateFieldSet(this,l,null!==(e=__classPrivateFieldGet(this,l,"f"))&&void 0!==e?e:"","f")}change(e){return __classPrivateFieldSet(this,l,e,"f"),this}static create(){return new c}};l=new WeakMap,__decorate([i],u.prototype,"change",null),u=c=__decorate([(0,n.Kf)(a)],u);const h=u;var d=r(1861),f=r(8485);const p=function component_component(e){return(0,n.ZP)(d.Z,null,(0,n.ZP)(f.Z.Div,{column:!0},e.front,e.back,(0,n.ZP)("button",{onClick:()=>e.create()},"Create")))};var v=r(2395);const m=class Deck{static get id(){return v.f.deck}},g=s.Z`
  .front {
    color: var(--color-master-dark);
    cursor: text;
    font-family: var(--font-family-base);
    font-size: var(--font-size-md);
    font-weight: var(--font-weight-medium);
    line-height: var(--line-height-sm);
    outline: none;
    padding: var(--spacing_inset-nano);
  }

  .front:empty::before {
    color: var(--color-master-light);
    content: 'Front here';
    display: block;
  }
`;const y=function front_component_component(e){return(0,n.ZP)("div",{className:g.front,onInput:t=>e.change(t),contenteditable:!0})};var _,b,front_decorate=function(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o},front_classPrivateFieldGet=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},front_classPrivateFieldSet=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r};let w=b=class Front{constructor(){_.set(this,void 0)}get validity(){return Boolean(this.value)}get value(){var e;return front_classPrivateFieldSet(this,_,null!==(e=front_classPrivateFieldGet(this,_,"f"))&&void 0!==e?e:"","f")}change(e){return front_classPrivateFieldSet(this,_,e,"f"),this}static create(){return new b}};_=new WeakMap,front_decorate([i],w.prototype,"change",null),w=b=front_decorate([(0,n.Kf)(y)],w);const P=w;var E=r(1407);const k=class Interval{static get oneMinute(){return E.IH((new Date).getTime(),6e4)}};var T=r(2055),S=r(9924),__awaiter=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function fulfilled(e){try{step(n.next(e))}catch(t){s(t)}}function rejected(e){try{step(n.throw(e))}catch(t){s(t)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};const j=(0,T.Z)((function storage(e,t){const r=t(...e);return setImmediate((()=>__awaiter(this,void 0,void 0,(function*(){yield S.default.from("card").insert([r])})))),r})),x={LEARN:1};var O,R,card_decorate=function(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o},card_classPrivateFieldGet=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},card_classPrivateFieldSet=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r};let C=class Fresh{constructor(){O.set(this,void 0),R.set(this,void 0)}get back(){var e;return card_classPrivateFieldSet(this,O,null!==(e=card_classPrivateFieldGet(this,O,"f"))&&void 0!==e?e:h.create(),"f")}get front(){var e;return card_classPrivateFieldSet(this,R,null!==(e=card_classPrivateFieldGet(this,R,"f"))&&void 0!==e?e:P.create(),"f")}create(){return{deck:m.id,front:this.front.value,back:this.back.value,interval:k.oneMinute,type:x.LEARN}}};O=new WeakMap,R=new WeakMap,card_decorate([j],C.prototype,"create",null),C=card_decorate([(0,n.Kf)(p)],C);const Z=C},8504:(e,t,r)=>{r.r(t),r.d(t,{default:()=>x});var n=r(5634),i=r(1861),s=r(8485),o=r(5282);const a=function component(e){return(0,n.ZP)(i.Z,null,(0,n.ZP)(s.Z.Div,{column:!0},(0,n.ZP)(o.Z.Div,{master:!0,dark:!0,md:!0,medium:!0},e.front),(0,n.ZP)(o.Z.Div,{master:!0,dark:!0,md:!0,medium:!0},e.back)))};const l=class EasyFactor{static get value(){return 2.5}};var c=r(1407);const u=class Interval{static get fourDays(){return c.IH((new Date).getTime(),3456e5)}static get oneDay(){return c.IH((new Date).getTime(),864e5)}static get temMinutes(){return c.IH((new Date).getTime(),6e5)}static get twelveHours(){return c.IH((new Date).getTime(),432e5)}};var h=r(2055),d=r(9924),__awaiter=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function fulfilled(e){try{step(n.next(e))}catch(t){s(t)}}function rejected(e){try{step(n.throw(e))}catch(t){s(t)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};const f=(0,h.Z)((function storage(e,t){const r=t(...e);return setImmediate((()=>__awaiter(this,void 0,void 0,(function*(){yield d.default.from("card").update(r).eq("id",this.id)})))),r})),p={REVIEW:2};var v,__decorate=function(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o},__classPrivateFieldGet=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},__classPrivateFieldSet=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r};class Card{get id(){return __classPrivateFieldGet(this,v,"f")}constructor(e){v.set(this,void 0),__classPrivateFieldSet(this,v,e,"f")}again(){return{interval:u.temMinutes}}easy(){return{easyFactor:l.value,interval:u.fourDays,type:p.REVIEW}}good(){return{easyFactor:l.value,interval:u.oneDay,type:p.REVIEW}}hard(){return{interval:u.twelveHours}}static create(e){return new Card(e.id)}}v=new WeakMap,__decorate([f],Card.prototype,"again",null),__decorate([f],Card.prototype,"easy",null),__decorate([f],Card.prototype,"good",null),__decorate([f],Card.prototype,"hard",null);const m=Card;var g=r(2395);const y=class Deck{static get id(){return g.f.deck}};const _=class interval_Interval{static get expired(){return(new Date).getTime()}};const b=function middleware(e){return function(t){return new Proxy((function(){const r=new t(...arguments);return setImmediate((()=>e(r))),r}),{get:(e,r)=>Reflect.get(t,r),set:(e,r,n)=>(Reflect.set(t,r,n),!0)})}};var w=r(7447),queue_awaiter=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function fulfilled(e){try{step(n.next(e))}catch(t){s(t)}}function rejected(e){try{step(n.throw(e))}catch(t){s(t)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};function request(e){var t;return queue_awaiter(this,void 0,void 0,(function*(){const{default:n}=yield Promise.resolve().then(r.bind(r,9924)),{data:i}=yield n.from("card").select("*").eq("deck",y.id).lte("interval",_.expired).single();null===(t=e[w.Z.Ok])||void 0===t||t.call(e,i)}))}const P=b(request),E=(0,h.Z)(((e,t)=>(setImmediate((()=>request(void 0))),t(...e))));Object.assign(P,{next:E});const k=P;var T,S,card_decorate=function(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o},card_classPrivateFieldGet=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},card_classPrivateFieldSet=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r};let j=class Card{constructor(){T.set(this,void 0)}get back(){var e;return null===(e=card_classPrivateFieldGet(this,T,"f"))||void 0===e?void 0:e.back}get front(){var e;return null===(e=card_classPrivateFieldGet(this,T,"f"))||void 0===e?void 0:e.front}again(){return card_classPrivateFieldGet(this,T,"f").again(),this}easy(){return card_classPrivateFieldGet(this,T,"f").easy(),this}good(){return card_classPrivateFieldGet(this,T,"f").good(),this}hard(){return card_classPrivateFieldGet(this,T,"f").hard(),this}[(T=new WeakMap,S=w.Z.Ok)](e){return card_classPrivateFieldSet(this,T,m.create(e),"f"),this}};card_decorate([k.next],j.prototype,"again",null),card_decorate([k.next],j.prototype,"easy",null),card_decorate([k.next],j.prototype,"good",null),card_decorate([k.next],j.prototype,"hard",null),card_decorate([n.vK],j.prototype,S,null),j=card_decorate([(0,n.Kf)(a),k],j);const x=j},9917:function(){var e=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function fulfilled(e){try{step(n.next(e))}catch(t){s(t)}}function rejected(e){try{step(n.throw(e))}catch(t){s(t)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};const t="0.qgm3jnit3t8";self.addEventListener("activate",(r=>{r.waitUntil(e(void 0,void 0,void 0,(function*(){Promise.all((yield caches.keys()).map((e=>t!==e&&caches.delete(e))))}))),self.clients.claim()})),self.addEventListener("install",(r=>{r.waitUntil(e(void 0,void 0,void 0,(function*(){const e=yield caches.open(t);yield e.addAll(["/"])}))),self.skipWaiting()})),self.addEventListener("fetch",(r=>{/.(?<ext>css|eot|htm|html|ico|js|json|otf|svg|ttf|woff|woff2)$/i.test(r.request.url)&&r.respondWith(e(void 0,void 0,void 0,(function*(){const e=yield caches.open(t);return(yield e.match(r.request))||fetch(r.request)})))}))},2453:(e,t,r)=>{r.d(t,{Z:()=>o});const n=new Blob(["self.addEventListener('message', e => self.postMessage(e.data))"],{type:"application/javascript"}),i=new Worker(window.URL.createObjectURL(n));const s={emit:function emit(e,t){i.postMessage({channel:e,message:t})},on:function on(e,t){i.addEventListener("message",(r=>{var n,i;return e===(null===(n=r.data)||void 0===n?void 0:n.channel)&&t(null===(i=r.data)||void 0===i?void 0:i.message)}))}},o=new Proxy({},{get(e,t){var r;return null===(r=document.cookie.match(`(^|;)\\s*${t}\\s*=\\s*([^;]+)`))||void 0===r?void 0:r.pop()},set:(e,t,r)=>(document.cookie=`${t}=${r};domain=localhost;expires=;path=/`,s.emit(`cookie:${t}`,r),s.emit("cookie:",{key:t,value:r}),!0)})},8946:(e,t,r)=>{r.d(t,{Z:()=>n});const n=523==r.j?function formData(e,t,r){const n=r.value;Object.assign(r,{value(e){const t=e instanceof Event?Object.fromEntries([...new FormData(e.target)]):e;return Reflect.apply(n,this,[t])}})}:null},6291:(e,t,r)=>{r.d(t,{Z:()=>n});const n=523==r.j?function prevent(e,t,r){const n=r.value;Object.assign(r,{value(e){return e instanceof Event&&e.preventDefault(),Reflect.apply(n,this,arguments)}})}:null},8910:(e,t,r)=>{r.d(t,{Z:()=>n});const n=523==r.j?function value(e,t,r){const n=r.value;Object.assign(r,{value(e){const t=e instanceof Event?e.target.value:e;return Reflect.apply(n,this,[t])}})}:null},1768:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(9318);const i=function i18n(e){return new Proxy({},{get:(t,r)=>e[r][n.Z.value]})}},2055:(e,t,r)=>{r.d(t,{Z:()=>n});const n=523==r.j?function interceptor(e){return function(t,r,n){const i=n.value;Object.assign(n,{value(){return Reflect.apply(e,this,[arguments,i.bind(this)])}})}}:null},9318:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(2395),i=r(2453);const s={EN:"en-US",ES:"es",PT:"pt-BR",get value(){return i.Z.lang||n.WC.lang||navigator.language||s.EN},set value(e){i.Z.lang=e}},o=s},7447:(e,t,r)=>{r.d(t,{Z:()=>n});const n={Error:Symbol("Error"),Ok:Symbol("Ok")}},145:(e,t,r)=>{r.d(t,{Z:()=>l});const n=function executeInterpolations(e,t){return e.map((e=>null==e?void 0:e(t)))};var i=r(5634),s=r(257);const o=function minifyCSS(e){return e.replace(s.Z," ").trim()};const a=function zip(e,t){return Array(Math.max(e.length,t.length)).fill().map(((r,n)=>[e[n],t[n]])).flat(1/0).join("")},l=new Proxy({},{get:(e,t)=>function(e,...r){return function(s,l){const c=o(a(e,n(r,s)));return(0,i.ZP)(t,Object.assign({style:c},s),...l)}}})},257:(e,t,r)=>{r.d(t,{Z:()=>n});const n=523==r.j?/[\s]{2,}|[\r\n\t]+/g:null},6135:(e,t,r)=>{r.d(t,{u:()=>i,C:()=>s});var n=r(7447);const i=function pattern(e){return function(t,r,i){const s=i.value;Object.assign(i,{value(t){var r,i;return new RegExp(e,"i").test(t)?(null===(r=this[n.Z.Ok])||void 0===r||r.call(this),Reflect.apply(s,this,arguments)):null===(i=this[n.Z.Ok])||void 0===i?void 0:i.call(this,"pattern")}})}};const s=function required(e,t,r){const i=r.value;Object.assign(r,{value(e){var t,r;return e?(null===(t=this[n.Z.Ok])||void 0===t||t.call(this),Reflect.apply(i,this,arguments)):null===(r=this[n.Z.Ok])||void 0===r?void 0:r.call(this,"required")}})}},2620:e=>{e.exports={version:"1.0.34"}}}]);